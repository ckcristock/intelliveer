"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2761],{2761:(B,p,a)=>{a.r(p),a.d(p,{ManageUserModule:()=>$});var g=a(9808),l=a(4996),m=a(531),f=a(9300),t=a(5e3),v=a(9196),b=a(5730),x=a(9709),U=a(1228),C=a(7802),M=a(63),u=a(9759);function Z(n,s){if(1&n&&(t.TgZ(0,"li",9),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("routerLink",e.url),t.xp6(1),t.hij(" ",e.title," ")}}function A(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1," Click here, "),t._UZ(2,"img",12),t._uU(3," to add User "),t.qZA())}function I(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h5")(3,"b"),t._uU(4,"You haven\u2019t added yet"),t.qZA()(),t.YNc(5,A,4,0,"p",8),t.qZA()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.manageUserAdd[0].isEnabled)}}function T(n,s){1&n&&(t.TgZ(0,"div",25)(1,"button",26),t._UZ(2,"img",27),t.qZA()())}function S(n,s){1&n&&(t.TgZ(0,"td"),t._uU(1," No email "),t.qZA())}function y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"a",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).gotoPersonalInfo(i)}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.profile.email," ")}}function w(n,s){1&n&&(t.TgZ(0,"td"),t._uU(1," No roles "),t.qZA())}function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"a",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).gotoPersonalInfo(i)}),t._uU(2),t.TgZ(3,"span",38,39),t.NdJ("mouseover",function(){t.CHM(e);const i=t.oxw(),r=i.$implicit,c=i.index;return t.oxw(3).usersPopUp(r.roles,c)}),t._uU(5," +2"),t.qZA()()()}if(2&n){const e=t.oxw(),o=e.$implicit,i=e.index,r=t.oxw(3);t.xp6(2),t.hij(" ",o.roles[0].name," "),t.xp6(1),t.Q6J("ngbPopover",r.popContentArray[i])}}function P(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"a",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).gotoPersonalInfo(i)}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.roles[0].name," ")}}function J(n,s){1&n&&(t.TgZ(0,"td"),t._uU(1,"Active "),t.qZA())}function N(n,s){1&n&&(t.TgZ(0,"td"),t._uU(1,"Deactive"),t.qZA())}function L(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).updateUserLoginStatus(i.loginStatus.loginIsEnabled,i._id)}),t._uU(1," Reactivate "),t.qZA()}}function Y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).updateUserLoginStatus(i.loginStatus.loginIsEnabled,i._id)}),t._uU(1," Deactivate "),t.qZA()}}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",29),t.NdJ("click",function(i){const c=t.CHM(e).$implicit;return t.oxw(3).userData(i,c)}),t.qZA()(),t.TgZ(3,"td")(4,"a",30),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).gotoPersonalInfo(r)}),t._uU(5),t.qZA()(),t.YNc(6,S,2,0,"td",8),t.YNc(7,y,3,1,"td",8),t.YNc(8,w,2,0,"td",8),t.YNc(9,O,6,2,"td",8),t.YNc(10,P,3,1,"td",8),t.YNc(11,J,2,0,"td",8),t.YNc(12,N,2,0,"td",8),t.TgZ(13,"td")(14,"div",31)(15,"button",32),t._UZ(16,"i",33),t.qZA(),t.TgZ(17,"div",34)(18,"button",35),t._uU(19," Resend activation email "),t.qZA(),t._UZ(20,"div",36)(21,"div",36),t.YNc(22,L,2,0,"button",37),t.YNc(23,Y,2,0,"button",37),t.qZA()()()()}if(2&n){const e=s.$implicit,o=s.index,i=t.oxw(3);t.xp6(2),t.s9C("value",o),t.xp6(3),t.AsE(" ",e.profile.firstName," ",e.profile.lastName," "),t.xp6(1),t.Q6J("ngIf",null==e.profile.email),t.xp6(1),t.Q6J("ngIf",null!=e.profile.email),t.xp6(1),t.Q6J("ngIf",0==e.roles.length),t.xp6(1),t.Q6J("ngIf",e.roles.length>1),t.xp6(1),t.Q6J("ngIf",1==e.roles.length),t.xp6(1),t.Q6J("ngIf",e.loginStatus.loginIsEnabled),t.xp6(1),t.Q6J("ngIf",!e.loginStatus.loginIsEnabled),t.xp6(10),t.Q6J("ngIf",!e.loginStatus.loginIsEnabled&&i.manageUserActiveDeactive[0].isEnabled),t.xp6(1),t.Q6J("ngIf",e.loginStatus.loginIsEnabled&&i.manageUserActiveDeactive[0].isEnabled)}}function D(n,s){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,k,24,12,"tr",28),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.usersList)}}function E(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"div",15)(4,"span",16),t._UZ(5,"i",17),t.qZA(),t._UZ(6,"input",18),t.qZA()(),t.YNc(7,T,3,0,"div",19),t.qZA(),t.TgZ(8,"div",20)(9,"div",21)(10,"table",22)(11,"thead")(12,"tr")(13,"th",23),t._UZ(14,"input",24),t.qZA(),t.TgZ(15,"th",23),t._uU(16,"Name"),t.qZA(),t.TgZ(17,"th",23),t._uU(18,"Email"),t.qZA(),t.TgZ(19,"th",23),t._uU(20,"Roles"),t.qZA(),t.TgZ(21,"th",23),t._uU(22,"Status"),t.qZA(),t.TgZ(23,"th",23),t._uU(24,"Actions"),t.qZA()()(),t.YNc(25,D,2,1,"tbody",8),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.manageUserAdd[0].isEnabled),t.xp6(18),t.Q6J("ngIf",0!=(null==e.usersList?null:e.usersList.length))}}const F=[{path:"",component:(()=>{class n{constructor(e,o,i,r,c,_,R){this.router=e,this.globalRoutes=o,this.alertService=i,this.userService=r,this.authService=c,this.businessGroupDropdownService=_,this.searchString=R,this.onManagUser=!0,this.usersList=[],this.roles=[],this.addRoute="",this.popContent="",this.popContentArray=[],this.popContentCounter=0,this.menuItems=[{title:"",url:""}],this.loginStatus=!0,this.loginStatusButtonName="Deactivate",this.userDataForEmail=[],this.businessGroupDropdownSupscription=this.businessGroupDropdownService.businessGroup().subscribe(d=>{d&&(this.selectedBusinessGroup=d,this.getOrgBgId())}),this.menuItems.push(this.globalRoutes.getSettingsUserManageRoutes()[0]),console.log("menuitemss",this.menuItems),e.events.pipe((0,f.h)(d=>d instanceof l.m2)).subscribe(d=>{this.onManagUser=d.url!=this.globalRoutes.getSettingsUserManageRoutes()[0].child[0]})}ngOnInit(){this.checkPermission()}ngOnDestroy(){this.businessGroupDropdownSupscription.unsubscribe()}getList(e){this.userService.getUserList(e).subscribe({next:o=>{this.usersList=o},error:()=>{}})}getOrgBgId(){let e=localStorage.getItem("selected_business_group"),o=this.authService.getOrgId();this.orgId=e;let i=this.authService.getLoggedInUser();console.log(i,e),(null==i?void 0:i.__ISSU__)?"intelliveer"==e||null==e?(this.getList("intelliveer"),this.orgId="intelliveer"):this.getList(e):(("intelliveer"==e||null==e)&&(this.orgId=o),console.log(this.orgId),this.getList(this.orgId))}usersPopUp(e,o){null==this.popContentArray[o]&&(this.popContentCounter++,e.forEach(i=>{1==this.popContentCounter?(this.popContentCounter++,this.popContent=`${i.name}`):this.popContent=`${this.popContent}, ${i.name}`,this.popContentArray[o]=this.popContent}),this.popContent="",this.popContentCounter=0)}gotoPersonalInfo(e){var o=this;return(0,m.Z)(function*(){localStorage.setItem("userId",e._id),o.router.navigate(["/dashboard/settings/user-management/edit-user"])})()}updateUserLoginStatus(e,o){this.loginStatus=1!=e;let i=this.authService.getLoggedInUser();(null==i?void 0:i.__ISSU__)&&"intelliveer"==this.orgId?this.alertService.conformAlert("Are you sure?","You want to update a user login status").then(r=>{r.value&&this.userService.userLoginStatus(this.loginStatus,o,"intelliveer").subscribe(c=>{this.alertService.success("Success","User login status updated successfully"),this.getOrgBgId()},c=>{console.log(c)})}):this.alertService.conformAlert("Are you sure?","You want to update a user login status").then(r=>{r.value&&this.userService.userLoginStatus(this.loginStatus,o,this.orgId).subscribe(c=>{this.alertService.success("Success","User login status updated successfully"),this.getOrgBgId()},c=>{console.log(c)})})}checkPermission(){let e=this.globalRoutes.getSettingsUserManageRoutes();console.log(e);let o=this.searchString.transform("title",e,"Manage User");this.manageUserAdd=this.searchString.transform("title",o[0].child,"Create User"),this.manageUserActiveDeactive=this.searchString.transform("title",o[0].child,"Activate and Deactivate")}userData(e,o){e.target.checked?this.userDataForEmail.push(o):this.userDataForEmail.find((r,c)=>{(null==r?void 0:r._id)==(null==o?void 0:o._id)&&this.userDataForEmail.splice(c,1)})}sendEmail(){this.alertService.conformAlert("Are you sure?","You want to send email").then(e=>{})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.F0),t.Y36(v.o),t.Y36(b.c),t.Y36(x.K),t.Y36(U.e),t.Y36(C.Y),t.Y36(M.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manage-user"]],decls:11,vars:4,consts:[[1,"row"],[1,"col-2"],[1,"settings-row","pointer",3,"routerLink"],[1,"bi","bi-arrow-left-circle",2,"font-size","2rem"],[1,"ul",2,"margin-top","23px"],["class","pointer","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-10","component-view"],["class","section","style","height: 90%",4,"ngIf"],[4,"ngIf"],["routerLinkActive","active",1,"pointer",3,"routerLink"],[1,"section",2,"height","90%"],[2,"text-align","center","padding-top","7%"],["src","assets/icons/add.svg","width","36","height","36","routerLink","/dashboard/settings/user-management/manage-user/add-user"],[1,"d-flex","justify-content-between"],[1,"col-4"],[1,"input-group","search_box"],["id","basic-addon1",1,"input-group-text","border-0","bg-transparent"],[1,"bi","bi-search"],["type","text","placeholder","Search","aria-describedby","basic-addon1",1,"form-control","border-0"],["class","d-flex",4,"ngIf"],["id","main",1,"container","mt-4"],[1,"row","formrow"],[1,"table"],["scope","col"],["type","checkbox"],[1,"d-flex"],["routerLink","/dashboard/settings/user-management/manage-user/add-user",1,"add_btn"],["src","/assets/icons/add.svg","alt",""],[4,"ngFor","ngForOf"],["type","checkbox",3,"value","click"],[2,"cursor","pointer",3,"click"],["ngbDropdown","","container","body","placement","bottom-end"],["ngbDropdownToggle","",1,"btn","btn-light","btn-sm","more_btn"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu",""],["ngbDropdownItem",""],[1,"dropdown-divider"],["ngbDropdownItem","",3,"click",4,"ngIf"],["triggers","mouseenter:mouseleave",1,"redcircle",3,"ngbPopover","mouseover"],["p1","ngbPopover"],["ngbDropdownItem","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"p"),t._uU(5,"Settings"),t.qZA()(),t.TgZ(6,"ul",4),t.YNc(7,Z,2,2,"li",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,I,6,1,"div",7),t.YNc(10,E,26,2,"div",8),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("routerLink","/dashboard/settings"),t.xp6(5),t.Q6J("ngForOf",o.menuItems),t.xp6(2),t.Q6J("ngIf",0==o.usersList.length),t.xp6(1),t.Q6J("ngIf",0!=o.usersList.length))},directives:[l.rH,g.sg,l.Od,g.O5,u.o8,u.jt,u.iD,u.Vi,u.TH],styles:[".add_btn[_ngcontent-%COMP%]{border:none;background:transparent;width:34px}.add_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}.search_box[_ngcontent-%COMP%]{border:1px solid #dbdcdd;border-radius:6px}tr[_ngcontent-%COMP%]{line-height:3}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:1px solid currentColor}.more_btn[_ngcontent-%COMP%]{font-size:16px;font-weight:700;background-color:transparent;border:none}table.table[_ngcontent-%COMP%]{table-layout:fixed}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-align:start}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:min-content}ul[_ngcontent-%COMP%]{font-size:13px;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:3.2}.redcircle[_ngcontent-%COMP%]{padding:2px;border-radius:50%;font-size:10px;color:#fff;background-color:#ec6e4d}.form-switch.form-switch-lg[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{height:1.8rem;width:3.75rem;border-radius:4rem}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:4%}"]}),n})()}];let Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.Bz.forChild(F)],l.Bz]}),n})();var q=a(4376),h=a(2382);let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,Q,u.IJ,q.A0,h.u5,h.UX]]}),n})()}}]);