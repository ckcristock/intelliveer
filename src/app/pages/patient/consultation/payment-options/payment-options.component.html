<div class="container">
	<app-nav-bar-pills
		[cancelBtn]="true"
		[saveBtn]="true"
		[disableSaveBtn]="false"
		(onCancel)="cancel()"
		(onSave)="save($event)"
	></app-nav-bar-pills>
	<div class="row">
		<div class="col-6">
			<div class="section">
				<h6 class="heading">Option {{ '1' }}</h6>
				<hr />
				<table class="table">
					<tbody>
						<tr>
							<td style="font-weight: bold">Timing</td>
							<td>
								<p>{{ 'Observation: 3 months' }}</p>
							</td>
						</tr>
						<tr>
							<td style="font-weight: bold">Treament Phase</td>
							<td>
								<p>
									{{ 'Comprehenssive' }}
								</p>
							</td>
						</tr>
						<tr>
							<td style="font-weight: bold">Treament Type</td>
							<td>
								<p>
									{{ 'Braces' }}
								</p>
							</td>
						</tr>
						<tr>
							<td style="font-weight: bold">Treament Time</td>
							<td>
								<p>
									{{ '30-36 Months' }}
								</p>
							</td>
						</tr>
						<tr>
							<td style="font-weight: bold">Prerequisites</td>
							<td>
								<p
									*ngFor="
										let prerequisties of prerequisitesArray
									"
								>
									{{ prerequisties }}
								</p>
							</td>
						</tr>
						<tr>
							<td style="font-weight: bold">Treatment Steps</td>
							<td>
								<p
									*ngFor="
										let treatmentStep of treatmentStepArray
									"
								>
									{{ treatmentStep }}
								</p>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-6">
			<div class="section">
				<h6 class="heading">Option {{ '1' }}</h6>
				<hr />
				<div class="row"><b>Fee Breakdown</b></div>
				<div class="row">
					<div class="col">Treatment Charges</div>
					<div class="col" [align]="'end'">$5,650.00</div>
					<hr />
				</div>
				<div class="row">
					<div class="col">Discounts</div>
					<div class="col" [align]="'end'" style="color: #2ea74f">
						($582.50)
					</div>
					<hr />
				</div>
				<div class="row mb-1">
					<div class="col">Final cost to do treatment</div>
					<div class="col" [align]="'end'" style="font-weight: 600">
						$2,567.50
					</div>
				</div>
				<div class="row mb-1">
					<div class="col">Estimated Insurance Coverage</div>
					<div class="col" [align]="'end'">$2,500.00</div>
				</div>
				<div class="row mb-1">
					<div class="col" style="color: #8a8c8e">
						Patient's Responsibility
					</div>
					<div
						class="col"
						[align]="'end'"
						style="font-weight: 600; font-size: x-large"
					>
						$2,567.50
					</div>
					<hr />
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-10">
			<div class="table-responsive">
				<table class="table table-bordered">
					<thead>
						<tr style="border: none" *ngIf="showBestOptionCss">
							<td style="border: none"></td>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray;
									let i = index
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'show-best-value-yes'
										: 'show-best-value-no'
								"
							>
								<p
									style="
										color: white;
										text-align: center;
										font-size: large;
										font-weight: bold;
									"
								>
									Best Value
								</p>
							</td>
						</tr>
						<tr>
							<td
								style="
									background-color: white;
									border-top-color: white;
									border-left-color: white;
									border-bottom-color: white;
								"
							></td>
							<th
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray;
									let i = index
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								style="text-align: center"
							>
								<div class="btn-group me-3">
									<button type="button" class="btn">
										Payment Option {{ i + 1 }}
									</button>
									<div
										class="btn-group"
										ngbDropdown
										role="group"
										aria-label="Button group with nested dropdown"
									>
										<button
											type="button"
											class="btn dropdown-toggle-split"
											ngbDropdownToggle
										>
											<i
												class="bi bi-three-dots-vertical"
											></i>
										</button>
										<div
											class="dropdown-menu"
											ngbDropdownMenu
											style="background-color: white"
										>
											<button ngbDropdownItem>
												Rename
											</button>
											<button ngbDropdownItem>
												Hide
											</button>
										</div>
									</div>
								</div>
								<br />
								<span style="font-size: medium">
									<i
										[ngClass]="
											treatmentOptionObj.count === 1 ||
											treatmentOptionObj.count > 1
												? 'bi bi-hand-thumbs-up-fill'
												: 'bi bi-hand-thumbs-up'
										"
										[ngStyle]="{
											color: '#e96247'
										}"
										(click)="
											countTreatment(treatmentOptionObj)
										"
									></i>
									&nbsp;
									<i
										[ngClass]="
											treatmentOptionObj.count === 2 ||
											treatmentOptionObj.count > 2
												? 'bi bi-hand-thumbs-up-fill'
												: 'bi bi-hand-thumbs-up'
										"
										[ngStyle]="{
											color: '#e96247'
										}"
										(click)="
											countTreatment(treatmentOptionObj)
										"
									></i>
									&nbsp;
									<i
										[ngClass]="
											treatmentOptionObj.count === 3
												? 'bi bi-hand-thumbs-up-fill'
												: 'bi bi-hand-thumbs-up'
										"
										[ngStyle]="{
											color: '#e96247'
										}"
										(click)="
											countTreatment(treatmentOptionObj)
										"
									></i>
								</span>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Payment Plan Type</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								[style.background-color]="
									treatmentOptionObj.count === 3
										? '#ffffff'
										: '#ffffff'
								"
							>
								<select class="form-select">
									<option
										*ngFor="
											let paymentPlan of paymentPlanType
										"
									>
										{{ paymentPlan }}
									</option>
								</select>
							</td>
						</tr>
						<tr>
							<th>
								Down Payment
								<img
									src="../../../../../assets/icons/split-payment.svg"
									width="20"
									height="20"
                                    *ngIf="!splitPayment"
                                    (click)="splitPayment = true"
								/>
                                <img
									src="../../../../../assets/icons/split-payment-green.svg"
									width="20"
									height="20"
                                    *ngIf="splitPayment"
								/>
							</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								[style.background-color]="
									treatmentOptionObj.count === 3
										? '#faf2e9'
										: '#f1f2f2'
								"
							>
								<div class="input-group">
									<input type="text" class="form-control" />
								</div>
							</td>
						</tr>
						<tr>
							<th>Payment Frequency</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								[style.background-color]="
									treatmentOptionObj.count === 3
										? '#ffffff'
										: '#ffffff'
								"
							>
								<select class="form-select">
									<option
										*ngFor="
											let paymentPlan of paymentPlanType
										"
									>
										{{ paymentPlan }}
									</option>
								</select>
							</td>
						</tr>
						<tr>
							<th>No. of Payments</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								[style.background-color]="
									treatmentOptionObj.count === 3
										? '#faf2e9'
										: '#f1f2f2'
								"
							>
								<div class="input-group">
									<input type="text" class="form-control" />
								</div>
							</td>
						</tr>
						<tr>
							<th>Payment Amount</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								[style.background-color]="
									treatmentOptionObj.count === 3
										? '#ffffff'
										: '#ffffff'
								"
							>
								<div class="input-group">
									<input type="text" class="form-control" />
								</div>
							</td>
						</tr>
						<tr>
							<th>Last Payment</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								[style.background-color]="
									treatmentOptionObj.count === 3
										? '#faf2e9'
										: '#f1f2f2'
								"
							>
								<p>$114</p>
							</td>
						</tr>
						<tr>
							<th>
								<div class="form-check">
									<input
										class="form-check-input"
										type="checkbox"
										value=""
										id="flexCheckChecked"
										checked
									/>
									<label
										class="form-check-label"
										for="flexCheckChecked"
									>
										Add Remainder <br/> to Last Payment
									</label>
								</div>
							</th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
							>
								<div [align]="'end'">
									<img
										src="../../../../../assets/icons/calendar.svg"
										width="20"
										height="20"
									/>
									<img
										src="../../../../../assets/icons/unlocked.svg"
										width="20"
										height="20"
										*ngIf="treatmentOptionObj.locked"
										(click)="openModel(content)"
									/>
									<img
										src="../../../../../assets/icons/locked.svg"
										width="20"
										height="20"
										*ngIf="!treatmentOptionObj.locked"
										(click)="openModel(content)"
									/>
								</div>
							</td>
						</tr>
						<tr>
							<th></th>
							<td
								*ngFor="
									let treatmentOptionObj of compareAllOptionArray
								"
								[ngClass]="
									treatmentOptionObj.count === 3
										? 'best-value-yes'
										: 'best-value-no'
								"
								style="background-color: white"
							>
								<div class="row">
									<div class="col" [align]="'center'">
										Down Payment
									</div>
								</div>
								<div class="row">
									<div class="col">Down Payment</div>
									<div class="col" [align]="'end'">$2500</div>
								</div>
								<div class="row">
									<div class="col">No.of payments</div>
									<div class="col" [align]="'end'">24</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-2" *ngIf="compareAllOptionArray?.length != 3">
			<span (click)="addMoreOption()">
				<img
					src="assets/icons/add.svg"
					width="15"
					height="15"
				/>&nbsp;Add more option
			</span>
		</div>
	</div>
</div>

<ng-template #content let-modal>
	<div class="modal-header">
		<h4 class="modal-title"></h4>
		<button
			type="button"
			class="btn-close"
			aria-label="Close"
			(click)="modal.dismiss('Cross click')"
		></button>
	</div>
	<div class="modal-body">
		<div class="row">
			<div class="col">
				<p>Minimum Down Payment</p>
				<div class="input-group mb-3">
					<input type="text" class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<p>Split Down Payment</p>
				<div class="input-group mb-3">
					<input type="text" class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<p>Minimum Payment Amount</p>
				<div class="input-group mb-3">
					<input type="text" class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<p>Maximum No. of Months</p>
				<div class="input-group mb-3">
					<input type="text" class="form-control" />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<p>Maximum No. of Payments</p>
				<p>26</p>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button
			type="button"
			class="btn btn-dark"
			(click)="modal.close('Close click')"
		>
			Save
		</button>
	</div>
</ng-template>
