"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[811],{811:(x,h,s)=>{s.r(h),s.d(h,{LocationModule:()=>y});var d=s(9808),_=s(4996),t=s(5e3),b=s(7802),g=s(93),m=s(63),r=s(9196),a=s(2382),u=s(9759);function C(n,c){if(1&n&&(t.TgZ(0,"li",10),t._uU(1),t.qZA()),2&n){const o=t.oxw().$implicit;t.Q6J("routerLink",o.url),t.xp6(1),t.hij(" ",o.title," ")}}function v(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,C,2,2,"li",9),t.qZA()),2&n){const o=c.$implicit;t.xp6(1),t.Q6J("ngIf",o.isEnabled)}}function L(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"img",14),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).addLocation()}),t.qZA()}}function T(n,c){if(1&n&&(t.TgZ(0,"div",11)(1,"div",12)(2,"h5")(3,"b"),t._uU(4,"You haven\u2019t added yet"),t.qZA()(),t.TgZ(5,"p"),t._uU(6,"Click here, "),t.YNc(7,L,1,0,"img",13),t._uU(8," to add Location"),t.qZA()()()),2&n){const o=t.oxw();t.xp6(7),t.Q6J("ngIf",o.locationAdd[0].isEnabled)}}function Z(n,c){1&n&&(t.TgZ(0,"div",26)(1,"button",27),t._UZ(2,"img",28),t.qZA()())}function w(n,c){if(1&n&&(t.TgZ(0,"button",36),t._uU(1," Edit "),t.qZA()),2&n){const o=t.oxw().$implicit;t.MGl("routerLink","/dashboard/settings/onboarding/location/edit/",o._id,"")}}function M(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(o);const l=t.oxw().$implicit;return t.oxw(3).delete(l._id)}),t._uU(1," Delete "),t.qZA()}}function A(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"span",29),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw(3).editLocation(null==i?null:i._id)}),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"span",29),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw(3).editLocation(null==i?null:i._id)}),t._uU(6),t.qZA()(),t.TgZ(7,"td")(8,"span",29),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw(3).editLocation(null==i?null:i._id)}),t._uU(9),t.qZA()(),t.TgZ(10,"td")(11,"span",29),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw(3).editLocation(null==i?null:i._id)}),t._uU(12),t.qZA()(),t.TgZ(13,"td")(14,"span",29),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw(3).editLocation(null==i?null:i._id)}),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.TgZ(17,"td")(18,"div",30)(19,"button",31),t._UZ(20,"i",32),t.qZA(),t.TgZ(21,"div",33),t.YNc(22,w,2,1,"button",34),t.YNc(23,M,2,0,"button",35),t.qZA()()()()}if(2&n){const o=c.$implicit,e=t.oxw(3);t.xp6(3),t.Oqu(null==o?null:o._id),t.xp6(3),t.Oqu(null==o?null:o.name),t.xp6(3),t.AsE("",null==o||null==o.contactPerson?null:o.contactPerson.firstName,"\xa0",null==o||null==o.contactPerson?null:o.contactPerson.lastName,""),t.xp6(3),t.Oqu(null==o||null==o.contactPerson||null==o.contactPerson.phone?null:o.contactPerson.phone.number),t.xp6(3),t.Oqu(t.xi3(16,8,null==o?null:o.createdAt,"mediumDate")),t.xp6(7),t.Q6J("ngIf",e.locationEdit[0].isEnabled),t.xp6(1),t.Q6J("ngIf",e.locationDelete[0].isEnabled)}}function O(n,c){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,A,24,11,"tr",5),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.data)}}const I=function(){return{standalone:!0}};function k(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"span",19),t._UZ(6,"i",20),t.qZA(),t.TgZ(7,"input",21),t.NdJ("ngModelChange",function(l){return t.CHM(o),t.oxw().searchText=l})("keyup",function(){return t.CHM(o),t.oxw().search()}),t.qZA()()(),t.YNc(8,Z,3,0,"div",22),t.qZA()(),t.TgZ(9,"div",23)(10,"div",0)(11,"table",24)(12,"thead")(13,"tr")(14,"th",25),t._uU(15,"ID"),t.qZA(),t.TgZ(16,"th",25),t._uU(17,"Name"),t.qZA(),t.TgZ(18,"th",25),t._uU(19,"Contact Person"),t.qZA(),t.TgZ(20,"th",25),t._uU(21,"Phone no."),t.qZA(),t.TgZ(22,"th",25),t._uU(23,"Created on"),t.qZA(),t.TgZ(24,"th",25),t._uU(25,"Actions"),t.qZA()()(),t.YNc(26,O,2,1,"tbody",8),t.qZA()()()()}if(2&n){const o=t.oxw();t.xp6(7),t.Q6J("ngModel",o.searchText)("ngModelOptions",t.DdM(4,I)),t.xp6(1),t.Q6J("ngIf",o.locationAdd[0].isEnabled),t.xp6(18),t.Q6J("ngIf",o.data)}}const D=[{path:"",component:(()=>{class n{constructor(o,e,l,i,p){this.businessGroupDropdownService=o,this.locationService=e,this.router=l,this.searchString=i,this.globalRoutes=p,this.searchCount=0,this.onBoardingMenu=this.globalRoutes.getSettingsOnboardingRoutes(),this.businessGroupDropdownSupscription=this.businessGroupDropdownService.businessGroup().subscribe(f=>{f&&(this.selectedBusinessGroup=f,this.getUserOrdID())})}ngOnInit(){this.checkPermission(),this.urlSettings=this.globalRoutes.getSettingsUrl()}ngOnDestroy(){this.businessGroupDropdownSupscription.unsubscribe()}fetchList(){this.selectedBusinessGroup&&this.locationService.getLocations(this.selectedBusinessGroup.bgId).subscribe({next:o=>{this.data=o},error:()=>{}})}fetchListSuperUser(o){this.locationService.getLocations(o).subscribe({next:e=>{this.data=e},error:()=>{}})}delete(o){var e;this.bgId||(this.bgId=null===(e=this.selectedBusinessGroup)||void 0===e?void 0:e.bgId),this.selectedBusinessGroup&&o&&this.locationService.deleteLocation(this.bgId,o).subscribe({next:l=>{this.getUserOrdID()},error:()=>{}})}addLocation(){this.router.navigate(["/dashboard/settings/onboarding/location/add"])}getUserOrdID(){null==localStorage.getItem("selected_business_group")?(this.fetchListSuperUser("intelliveer"),this.bgId="intelliveer"):(this.bgId="",this.fetchList())}search(){this.searchCount++,1==this.searchCount&&(this.dataBackup=this.data),this.data=this.dataBackup;let o=this.data.filter(e=>e._id.toLowerCase().includes(this.searchText.toLowerCase())||e.name.toLowerCase().includes(this.searchText.toLowerCase())||e.contactPerson.firstName.toLowerCase().includes(this.searchText.toLowerCase())||e.contactPerson.lastName.toLowerCase().includes(this.searchText.toLowerCase())||e.contactPerson.phone.number.toLowerCase().includes(this.searchText.toLowerCase())||e.createdAt.toString().toLowerCase().includes(this.searchText.toLowerCase())||e.contactPerson.firstName.toLowerCase().concat(" ").concat(e.contactPerson.lastName.toLowerCase()).includes(this.searchText.toLowerCase()));this.data=o}checkPermission(){let o=this.globalRoutes.getSettingsOnboardingRoutes(),e=this.searchString.transform("title",o,"Location");this.locationAdd=this.searchString.transform("title",e[0].child,"Add"),this.locationEdit=this.searchString.transform("title",e[0].child,"Edit"),this.locationDelete=this.searchString.transform("title",e[0].child,"Delete"),console.log(this.locationAdd,this.locationEdit,this.locationDelete)}editLocation(o){this.router.navigate([`${this.globalRoutes.getSettingsOnboardingRoutes()[2].child[1].url}/${o}`])}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(b.Y),t.Y36(g.a),t.Y36(_.F0),t.Y36(m.E),t.Y36(r.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-location"]],decls:11,vars:4,consts:[[1,"row"],[1,"col-2"],[1,"settings-row","pointer",3,"routerLink"],[1,"bi","bi-arrow-left-circle",2,"font-size","2rem","cursor","pointer"],[1,"ul",2,"margin-top","27px"],[4,"ngFor","ngForOf"],[1,"col-10","component-view"],["class","section","style","height: 90%;",4,"ngIf"],[4,"ngIf"],["class","pointer","routerLinkActive","active",3,"routerLink",4,"ngIf"],["routerLinkActive","active",1,"pointer",3,"routerLink"],[1,"section",2,"height","90%"],[2,"text-align","center","padding-top","7%"],["src","assets/icons/add.svg","width","36","height","36",3,"click",4,"ngIf"],["src","assets/icons/add.svg","width","36","height","36",3,"click"],[1,"container"],[1,"d-flex","justify-content-between","call-to-actions"],[1,"col-4"],[1,"input-group","search_box"],["id","basic-addon1",1,"input-group-text","border-0","bg-transparent"],[1,"bi","bi-search"],["ngbTooltip","For date use format: AAAA-MM-DD","tooltipClass","tooltip-class","type","text","placeholder","Search","aria-describedby","basic-addon1",1,"form-control","border-0",3,"ngModel","ngModelOptions","ngModelChange","keyup"],["class","d-flex gap-2",4,"ngIf"],[1,"container","mt-4"],[1,"table"],["scope","col"],[1,"d-flex","gap-2"],["routerLink","/dashboard/settings/onboarding/location/add",1,"add_btn"],["src","/assets/icons/add.svg","alt",""],[1,"pointer",3,"click"],["ngbDropdown","","container","body","placement","bottom-end"],["ngbDropdownToggle","",1,"btn","btn-light","btn-sm","more_btn"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"routerLink",4,"ngIf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"routerLink"],["ngbDropdownItem","",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"p"),t._uU(5,"Settings"),t.qZA()(),t.TgZ(6,"ul",4),t.YNc(7,v,2,1,"div",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,T,9,1,"div",7),t.YNc(10,k,27,5,"div",8),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("routerLink",e.urlSettings),t.xp6(5),t.Q6J("ngForOf",e.onBoardingMenu),t.xp6(2),t.Q6J("ngIf",!e.data),t.xp6(1),t.Q6J("ngIf",e.data))},directives:[_.rH,d.sg,d.O5,_.Od,a.Fj,u._L,a.JJ,a.On,u.jt,u.iD,u.Vi,u.TH],pipes:[d.uU],styles:[".add_btn[_ngcontent-%COMP%]{border:none;background:transparent;width:34px}.add_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}.search_box[_ngcontent-%COMP%]{border:1px solid #dbdcdd;border-radius:6px}tr[_ngcontent-%COMP%]{line-height:3}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:1px solid currentColor}.more_btn[_ngcontent-%COMP%]{font-size:16px;font-weight:700;background-color:transparent;border:none}table.table[_ngcontent-%COMP%]{table-layout:fixed}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-align:start}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:min-content}ul[_ngcontent-%COMP%]{font-size:13px;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:3.2}.component-view[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-x:hidden;overflow-y:auto}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.Bz.forChild(D)],_.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,u.XC,P,u.IJ,a.u5,a.UX]]}),n})()},93:(x,h,s)=>{s.d(h,{a:()=>b});var d=s(7448),_=s(5e3),t=s(520);let b=(()=>{class g{constructor(r){this.http=r}getLocations(r){return this.http.get(`${d.k.backend.host}/bg/location`,{headers:{"X-ORG-ID":r}})}getLocation(r,a){return this.http.get(`${d.k.backend.host}/bg/location/${a}`,{headers:{"X-ORG-ID":r}})}createLocation(r,a){return this.http.post(`${d.k.backend.host}/bg/location`,a,{headers:{"X-ORG-ID":r}})}updateLocation(r,a,u){return this.http.put(`${d.k.backend.host}/bg/location/${a}`,u,{headers:{"X-ORG-ID":r}})}deleteLocation(r,a){return this.http.delete(`${d.k.backend.host}/bg/location/${a}`,{headers:{"X-ORG-ID":r}})}}return g.\u0275fac=function(r){return new(r||g)(_.LFG(t.eN))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);