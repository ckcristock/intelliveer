"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4816],{4816:(B,_,s)=>{s.r(_),s.d(_,{RoleTemplatesModule:()=>M});var d=s(9808),c=s(4996),e=s(5e3),m=s(5325),T=s(5730),h=s(1228),v=s(7802),g=s(9196),p=s(9759);function b(o,i){if(1&o&&(e.TgZ(0,"li",11),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",t.url),e.xp6(1),e.hij(" ",t.title," ")}}function f(o,i){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,b,2,2,"li",10),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isEnabled)}}function x(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"h5")(3,"b"),e._uU(4,"You haven\u2019t added yet"),e.qZA()(),e.TgZ(5,"p"),e._uU(6," Click here, "),e.TgZ(7,"img",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().addRoleTemplate()}),e.qZA(),e._uU(8," to add Role Template "),e.qZA()()()}}function Z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"select",28),e.NdJ("change",function(l){return e.CHM(t),e.oxw(2).chooseTypes(l)}),e.TgZ(2,"option",29),e._uU(3,"Select Type"),e.qZA(),e.TgZ(4,"option",30),e._uU(5,"Public"),e.qZA(),e.TgZ(6,"option",31),e._uU(7,"Private"),e.qZA(),e.TgZ(8,"option",32),e._uU(9,"Specific"),e.qZA()()()}}function R(o,i){if(1&o&&(e.TgZ(0,"div",33)(1,"button",34),e._UZ(2,"img",35),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("routerLink",t.addRoute)}}function C(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(3).deleteRoleT(l._id)}),e._uU(1," Delete "),e.qZA()}}function y(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(3).editRoleTemplate(r._id)}),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(3).editRoleTemplate(r._id)}),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(3).editRoleTemplate(r._id)}),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"div",38)(12,"button",39),e._UZ(13,"i",40),e.qZA(),e.TgZ(14,"div",41)(15,"button",42),e._uU(16," Export as a pdf "),e.qZA(),e.TgZ(17,"button",42),e._uU(18,"Print"),e.qZA(),e._UZ(19,"div",43),e.YNc(20,C,2,0,"button",44),e.qZA()()()()}if(2&o){const t=i.$implicit,n=e.oxw(3);e.xp6(3),e.Oqu(t._id),e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(3),e.Oqu(null==t?null:t.description),e.xp6(11),e.Q6J("ngIf",n.isSuperUser&&"private"===t.type)}}function U(o,i){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,y,21,4,"tr",36),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.roleTemplates)}}function A(o,i){if(1&o&&(e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"span",19),e._UZ(6,"i",20),e.qZA(),e._UZ(7,"input",21),e.qZA()(),e.YNc(8,Z,10,0,"div",22),e.YNc(9,R,3,1,"div",23),e.qZA()(),e.TgZ(10,"div",24)(11,"div",25)(12,"table",26)(13,"thead")(14,"tr")(15,"th",27),e._uU(16,"ID"),e.qZA(),e.TgZ(17,"th",27),e._uU(18,"Role template name"),e.qZA(),e.TgZ(19,"th",27),e._uU(20,"Description"),e.qZA(),e.TgZ(21,"th",27),e._uU(22,"Actions"),e.qZA()()(),e.YNc(23,U,2,1,"tbody",8),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngIf",t.isSuperUser),e.xp6(1),e.Q6J("ngIf",t.isSuperUser),e.xp6(14),e.Q6J("ngIf",t.roleTemplates)}}const I=[{path:"",component:(()=>{class o{constructor(t,n,l,r,a,w,O,q){this.router=t,this.rolesUserServ=n,this.alertService=l,this._ngZone=r,this.authService=a,this.businessGroupDropdownService=w,this.globalRoutes=O,this.routes=q,this.addRoute="",this.isSuperUser=!1,this.businessGroupDropdownSupscription=this.businessGroupDropdownService.businessGroup().subscribe(u=>{u&&(console.log(u),this.selectedBusinessGroup=u,this.getOrgBgId())})}ngOnInit(){this.menuItems=this.routes.getSettingsRoleManageRoutes(),this.urlSettings=this.routes.getSettingsUrl(),this.addRoute=this.globalRoutes.getSettingsRoleManageRoutes()[0].child[0].url}addRoleTemplate(){this.router.navigate([this.globalRoutes.getSettingsRoleManageRoutes()[0].child[0].url])}editRoleTemplate(t){this.router.navigate([this.globalRoutes.getSettingsRoleManageRoutes()[0].child[1].url],{queryParams:{_id:t}})}deleteRoleT(t){this.alertService.conformAlert("Are you sure?","You want to delete a role template").then(n=>{n.value&&this.rolesUserServ.deleteRoleTemplateById(t).subscribe(l=>{this.alertService.success("Success","Role Template has been deleted successfully"),this._ngZone.run(()=>{this.roleTemplateList()})},l=>{console.log(l)})})}roleTemplateList(){this.rolesUserServ.listRoleTemplate().subscribe(t=>{this.roleTemplates=t})}roleTemplateListByBGId(t,n){this.rolesUserServ.listRoleTemplateListByBGId(t,n).subscribe(l=>{this.roleTemplates=l})}chooseTypes(t){this.selectedType=t.target.value,console.log(this.selectedType),this.getOrgBgId()}getOrgBgId(){let t=this.authService.getLoggedInUser();this.isSuperUser=null==t?void 0:t.__ISSU__;let n=localStorage.getItem("selected_business_group");console.log(n),(null==t?void 0:t.__ISSU__)?this.selectedType?(this.roleTemplateListByBGId(this.selectedType,this.selectedBusinessGroup.bgId),this.selectedType=null):this.selectedType||"intelliveer"==n||null==n?this.roleTemplateList():this.roleTemplateListByBGId("specific",this.selectedBusinessGroup.bgId):this.roleTemplateListByBGId("specific",this.selectedBusinessGroup.bgId)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.F0),e.Y36(m.C),e.Y36(T.c),e.Y36(e.R0b),e.Y36(h.e),e.Y36(v.Y),e.Y36(g.o),e.Y36(g.o))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-role-templates"]],decls:13,vars:4,consts:[[1,"row"],[1,"col-2"],[1,"settings-row","pointer",3,"routerLink"],[1,"bi","bi-arrow-left-circle",2,"font-size","2rem"],[1,"ul",2,"margin-top","27px"],["style","margin-left: 20px;",4,"ngFor","ngForOf"],[1,"col-10","component-view"],["class","section","style","height: 90%",4,"ngIf"],[4,"ngIf"],[2,"margin-left","20px"],["class","pointer","routerLinkActive","active",3,"routerLink",4,"ngIf"],["routerLinkActive","active",1,"pointer",3,"routerLink"],[1,"section",2,"height","90%"],[2,"text-align","center","padding-top","7%"],["src","assets/icons/add.svg","width","36","height","36",3,"click"],[1,"container"],[1,"d-flex","justify-content-between","call-to-actions"],[1,"col-4"],[1,"input-group","search_box"],["id","basic-addon1",1,"input-group-text","border-0","bg-transparent"],[1,"bi","bi-search"],["type","text","placeholder","Search","aria-describedby","basic-addon1",1,"form-control","border-0"],["class","col-4",4,"ngIf"],["class","d-flex gap-2",4,"ngIf"],["id","main",1,"container","mt-4"],[1,"row","formrow"],[1,"table"],["scope","col"],[1,"form-select",3,"change"],["value","","selected",""],["value","public"],["value","private"],["value","specific"],[1,"d-flex","gap-2"],[1,"add_btn",3,"routerLink"],["src","/assets/icons/add.svg","alt",""],[4,"ngFor","ngForOf"],[1,"pointer",3,"click"],["ngbDropdown","","container","body","placement","bottom-end"],["ngbDropdownToggle","",1,"btn","btn-light","btn-sm","more_btn"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu",""],["ngbDropdownItem",""],[1,"dropdown-divider"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"p"),e._uU(5,"Settings"),e.qZA()(),e.TgZ(6,"ul",4)(7,"p"),e._uU(8,"Role Management"),e.qZA(),e.YNc(9,f,2,1,"div",5),e.qZA()(),e.TgZ(10,"div",6),e.YNc(11,x,9,0,"div",7),e.YNc(12,A,24,3,"div",8),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("routerLink",n.urlSettings),e.xp6(7),e.Q6J("ngForOf",n.menuItems),e.xp6(2),e.Q6J("ngIf",0==(null==n.roleTemplates?null:n.roleTemplates.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==n.roleTemplates?null:n.roleTemplates.length)))},directives:[c.rH,d.sg,d.O5,c.Od,p.jt,p.iD,p.Vi,p.TH],styles:[".add_btn[_ngcontent-%COMP%]{border:none;background:transparent;width:34px}.add_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}.search_box[_ngcontent-%COMP%]{border:1px solid #dbdcdd;border-radius:6px}tr[_ngcontent-%COMP%]{line-height:3}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:1px solid currentColor}.more_btn[_ngcontent-%COMP%]{font-size:16px;font-weight:700;background-color:transparent;border:none}table.table[_ngcontent-%COMP%]{table-layout:fixed}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-align:start}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:min-content}ul[_ngcontent-%COMP%]{font-size:13px;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:3.2}"]}),o})()}];let S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.Bz.forChild(I)],c.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,p.IJ,S]]}),o})()}}]);