"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4314],{4314:(f,m,d)=>{d.r(m),d.d(m,{RolesModule:()=>Y});var _=d(9808),p=d(4996),R=d(727),e=d(5e3),b=d(4001),h=d(1228),T=d(7802),r=d(5730),a=d(9196),u=d(9759);function g(o,s){if(1&o&&(e.TgZ(0,"li",11),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",t.url),e.xp6(1),e.hij(" ",t.title," ")}}function v(o,s){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,g,2,2,"li",10),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.isEnabled)}}function x(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"p"),e._uU(1," Click here, "),e.TgZ(2,"img",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addRole()}),e.qZA(),e._uU(3," to add Role "),e.qZA()}}function C(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"p"),e._uU(1," Click here, "),e.TgZ(2,"img",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addRole()}),e.qZA(),e._uU(3," to add Role "),e.qZA()}}function A(o,s){if(1&o&&(e.TgZ(0,"div",12)(1,"div",13)(2,"h5")(3,"b"),e._uU(4,"You haven\u2019t added yet"),e.qZA()(),e.YNc(5,x,4,0,"p",8),e.YNc(6,C,4,0,"p",8),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==t.user?null:t.user.isBGAdmin)||(null==t.user?null:t.user.__ISSU__)),e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.isBGAdmin)&&(t.roleRRTAdd||t.roleURRTAdd))}}function E(o,s){1&o&&(e.TgZ(0,"button",26),e._UZ(1,"img",27),e.qZA())}function Z(o,s){1&o&&(e.TgZ(0,"button",26),e._UZ(1,"img",27),e.qZA())}function k(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"span",31),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).editRole(null==l?null:l._id)}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(null==t?null:t.roleTemplate[0].name)}}function I(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"span",31),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).editRole(null==l?null:l._id)}),e._uU(2,"Without Role Template"),e.qZA()()}}function S(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"span",31),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).editRole(null==l?null:l._id)}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",null==t?null:t.roleTemplate.name,"")}}function U(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",31),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(4).editRole(null==i?null:i._id)}),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span",31),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(4).editRole(null==i?null:i._id)}),e._uU(6),e.qZA()(),e.YNc(7,k,3,1,"td",8),e.YNc(8,I,3,0,"td",8),e.YNc(9,S,3,1,"td",8),e.TgZ(10,"td")(11,"div",32)(12,"button",33),e._UZ(13,"i",34),e.qZA(),e.TgZ(14,"div",35)(15,"button",36),e._uU(16," Export as a pdf "),e.qZA(),e._UZ(17,"div",37),e.TgZ(18,"button",38),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(4).delteRoleUser(null==i?null:i._id)}),e._uU(19," Delete "),e.qZA()()()()()}if(2&o){const t=s.$implicit;e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(3),e.Oqu(null==t?null:t.description),e.xp6(1),e.Q6J("ngIf",1==(null==t?null:t.roleTemplate.length)),e.xp6(1),e.Q6J("ngIf",null==(null==t?null:t.roleTemplateName)&&null==(null==t?null:t.roleTemplate)||0==(null==t||null==t.roleTemplate?null:t.roleTemplate.length)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.roleTemplate?null:t.roleTemplate.name)}}function L(o,s){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,U,20,5,"tr",30),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.roleList)}}function y(o,s){if(1&o&&(e.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th",29),e._uU(4,"Role"),e.qZA(),e.TgZ(5,"th",29),e._uU(6,"Description"),e.qZA(),e.TgZ(7,"th",29),e._uU(8,"Template"),e.qZA(),e.TgZ(9,"th",29),e._uU(10,"Actions"),e.qZA()()(),e.YNc(11,L,2,1,"tbody",8),e.qZA()),2&o){const t=e.oxw(2);e.xp6(11),e.Q6J("ngIf",t.roleList)}}function D(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"span",31),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).editRole(null==l?null:l._id)}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(null==t?null:t.roleTemplateName)}}function O(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"span",31),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).editRole(null==l?null:l._id)}),e._uU(2,"Without Role Template"),e.qZA()()}}function B(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"span",31),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).editRole(null==l?null:l._id)}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",null==t?null:t.roleTemplate.name,"")}}function M(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).delteRoleUser(null==l?null:l._id)}),e._uU(1," Delete "),e.qZA()}}function w(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",31),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(4).editRole(null==i?null:i._id)}),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span",31),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(4).editRole(null==i?null:i._id)}),e._uU(6),e.qZA()(),e.YNc(7,D,3,1,"td",8),e.YNc(8,O,3,0,"td",8),e.YNc(9,B,3,1,"td",8),e.TgZ(10,"td")(11,"div",32)(12,"button",33),e._UZ(13,"i",34),e.qZA(),e.TgZ(14,"div",35)(15,"button",36),e._uU(16,"Export as a pdf"),e.qZA(),e._UZ(17,"div",37),e.YNc(18,M,2,0,"button",39),e.qZA()()()()}if(2&o){const t=s.$implicit,n=e.oxw(4);e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(3),e.Oqu(null==t?null:t.description),e.xp6(1),e.Q6J("ngIf",null==t?null:t.roleTemplateName),e.xp6(1),e.Q6J("ngIf",null==(null==t?null:t.roleTemplateName)&&null==(null==t?null:t.roleTemplate)||0==(null==t||null==t.roleTemplate?null:t.roleTemplate.length)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.roleTemplate?null:t.roleTemplate.name),e.xp6(9),e.Q6J("ngIf",n.roleRRTDelete||n.roleURRTDelete)}}function N(o,s){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,w,19,6,"tr",30),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.roleList)}}function J(o,s){if(1&o&&(e.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th",29),e._uU(4,"Roles"),e.qZA(),e.TgZ(5,"th",29),e._uU(6,"Description"),e.qZA(),e.TgZ(7,"th",29),e._uU(8,"Template"),e.qZA(),e.TgZ(9,"th",29),e._uU(10,"Actions"),e.qZA()()(),e.YNc(11,N,2,1,"tbody",8),e.qZA()),2&o){const t=e.oxw(2);e.xp6(11),e.Q6J("ngIf",t.roleList)}}function $(o,s){if(1&o&&(e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"span",19),e._UZ(6,"i",20),e.qZA(),e._UZ(7,"input",21),e.qZA()(),e.TgZ(8,"div",22),e.YNc(9,E,2,0,"button",23),e.YNc(10,Z,2,0,"button",23),e.qZA()()(),e.TgZ(11,"div",24)(12,"div",0),e.YNc(13,y,12,1,"table",25),e.YNc(14,J,12,1,"table",25),e.qZA()()()),2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",(null==t.user?null:t.user.isBGAdmin)||(null==t.user?null:t.user.__ISSU__)),e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.isBGAdmin)&&(t.roleRRTAdd||t.roleURRTAdd)),e.xp6(3),e.Q6J("ngIf",(null==t.user?null:t.user.isBGAdmin)||(null==t.user?null:t.user.__ISSU__)),e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.isBGAdmin||null!=t.user&&t.user.__ISSU__))}}const q=[{path:"",component:(()=>{class o{constructor(t,n,l,i,c,F,G){this.router=t,this.roleService=n,this.authService=l,this.businessGroupDropdownService=i,this.alertService=c,this.globalRoutes=F,this.routes=G,this.businessGroupDropdownSupscription=new R.w0,this.roleList=[],this.roleRRT=!1,this.roleRRTEdit=!1,this.roleRRTAdd=!1,this.roleRRTDelete=!1,this.roleURRT=!1,this.roleURRTEdit=!1,this.roleURRTAdd=!1,this.roleURRTDelete=!1}ngOnInit(){this.menuItems=this.routes.getSettingsRoleManageRoutes(),this.urlSettings=this.routes.getSettingsUrl(),this.businessGroupDropdownSupscription=this.businessGroupDropdownService.businessGroup().subscribe(t=>{t&&(this.selectedBusinessGroup=t,console.log(this.selectedBusinessGroup),this.getOrgBgId())})}getRoleList(){this.roleService.getRoleList().subscribe(t=>{this.roleList=t})}getRoleListByBgId(t){console.log(t),this.checkPermissionRRTOrURRT(),this.roleService.getRoleListByID(t).subscribe(n=>{this.roleRRT&&!this.roleURRT?this.roleList=n:this.roleRRT&&this.roleURRT?this.roleService.getRoleListByIDUnRestricted(t).subscribe(l=>{this.roleList=[...n,...l]}):!this.roleRRT&&this.roleURRT&&this.roleService.getRoleListByIDUnRestricted(t).subscribe(l=>{this.roleList=l})})}getRoleListByBgAdminId(t){this.roleService.getRoleListByID(t).subscribe(n=>{this.roleService.getRoleListByIDUnRestricted(t).subscribe(l=>{this.roleList=[...n,...l]})})}addRole(){this.router.navigate(["/dashboard/settings/role-management/manage-role/add"])}deleteRoleByBg(t){this.alertService.conformAlert("Are you sure?","You want to delete a role").then(n=>{var l;n.value&&this.roleService.deleteRole(t,null===(l=this.selectedBusinessGroup)||void 0===l?void 0:l.bgId).subscribe(i=>{var c;this.alertService.success("Success","Role has been delete successfully"),this.getRoleListByBgId(null===(c=this.selectedBusinessGroup)||void 0===c?void 0:c.bgId)},i=>{console.log(i)})})}deleteRole(t){this.alertService.conformAlert("Are you sure?","You want to delete a role").then(n=>{n.value&&this.roleService.deleteRole(t).subscribe(l=>{this.alertService.success("Success","Role has been delete successfully"),this.getRoleList()},l=>{console.log(l)})})}getOrgBgId(){let t=localStorage.getItem("selected_business_group"),n=this.authService.getOrgId(),l=localStorage.getItem("permissionSet");l=JSON.parse(l),this.user=l,console.log(l,t),(null==l?void 0:l.__ISSU__)?"intelliveer"==t||null==t?this.getRoleList():this.getRoleListByBgAdminId(t):(null==l?void 0:l.isBGAdmin)?this.getRoleListByBgAdminId(t):(("intelliveer"==t||null==t)&&(t=n),console.log(t),this.getRoleListByBgId(t))}delteRoleUser(t){let n=this.authService.getLoggedInUser();(null==n?void 0:n.__ISSU__)?this.deleteRole(t):this.deleteRoleByBg(t)}checkPermissionRRTOrURRT(){var t,n;let l=localStorage.getItem("permissionSet");l=JSON.parse(l),this.user=l,null===(n=null===(t=null==l?void 0:l.roles[0])||void 0===t?void 0:t.permissions[0])||void 0===n||n.sections.forEach(i=>{"templateBasedRestrictedRoles"==i.section?i.permissions.forEach(c=>{switch(c.name){case"CAN_CREATE_TEMPLATE_BASED_RESTRICTED_ROLE":this.roleRRTAdd=c.enabled;break;case"CAN_RETRIEVE_TEMPLATE_BASED_RESTRICTED_ROLE":this.roleRRT=c.enabled;break;case"CAN_EDIT_TEMPLATE_BASED_RESTRICTED_ROLE":this.roleRRTEdit=c.enabled;break;case"CAN_DELETE_TEMPLATE_BASED_RESTRICTED_ROLE":this.roleRRTDelete=c.enabled}}):"templateBasedUnRestrictedRoles"==i.section&&i.permissions.forEach(c=>{switch(c.name){case"CAN_CREATE_TEMPLATE_BASED_UNRESTRICTED_ROLE":this.roleURRTAdd=c.enabled;break;case"CAN_RETRIEVE_TEMPLATE_BASED_UNRESTRICTED_ROLE":this.roleURRT=c.enabled;break;case"CAN_EDIT_TEMPLATE_BASED_UNRESTRICTED_ROLE":this.roleURRTEdit=c.enabled;break;case"CAN_DELETE_TEMPLATE_BASED_UNRESTRICTED_ROLE":this.roleURRTDelete=c.enabled}})})}editRole(t){this.router.navigate([`${this.globalRoutes.getSettingsRoleManageRoutes()[1].child[1].url}/${t}`])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.F0),e.Y36(b.N),e.Y36(h.e),e.Y36(T.Y),e.Y36(r.c),e.Y36(a.o),e.Y36(a.o))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-roles"]],decls:13,vars:4,consts:[[1,"row"],[1,"col-2"],[1,"settings-row","pointer",3,"routerLink"],[1,"bi","bi-arrow-left-circle",2,"font-size","2rem","cursor","pointer"],[1,"ul",2,"margin-top","27px"],["style","margin-left: 20px",4,"ngFor","ngForOf"],[1,"col-10","component-view"],["class","section","style","height: 90%",4,"ngIf"],[4,"ngIf"],[2,"margin-left","20px"],["class","pointer","routerLinkActive","active",3,"routerLink",4,"ngIf"],["routerLinkActive","active",1,"pointer",3,"routerLink"],[1,"section",2,"height","90%"],[2,"text-align","center","padding-top","7%"],["src","assets/icons/add.svg","width","36","height","36",3,"click"],[1,"container"],[1,"d-flex","justify-content-between","call-to-actions"],[1,"col-4"],[1,"input-group","search_box"],["id","basic-addon1",1,"input-group-text","border-0","bg-transparent"],[1,"bi","bi-search"],["type","text","placeholder","Search","aria-describedby","basic-addon1",1,"form-control","border-0"],[1,"d-flex","gap-2"],["class","add_btn","routerLink","/dashboard/settings/role-management/manage-role/add",4,"ngIf"],["id","main",1,"container","mt-4"],["class","table",4,"ngIf"],["routerLink","/dashboard/settings/role-management/manage-role/add",1,"add_btn"],["src","/assets/icons/add.svg","alt",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"pointer",3,"click"],["ngbDropdown","","container","body","placement","bottom-end"],["ngbDropdownToggle","",1,"btn","btn-light","btn-sm","more_btn"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu",""],["ngbDropdownItem",""],[1,"dropdown-divider"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"p"),e._uU(5,"Settings"),e.qZA()(),e.TgZ(6,"ul",4)(7,"p"),e._uU(8,"Role Management"),e.qZA(),e.YNc(9,v,2,1,"div",5),e.qZA()(),e.TgZ(10,"div",6),e.YNc(11,A,7,2,"div",7),e.YNc(12,$,15,4,"div",8),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("routerLink",n.urlSettings),e.xp6(7),e.Q6J("ngForOf",n.menuItems),e.xp6(2),e.Q6J("ngIf",0==n.roleList.length),e.xp6(1),e.Q6J("ngIf",0!=n.roleList.length))},directives:[p.rH,_.sg,_.O5,p.Od,u.jt,u.iD,u.Vi,u.TH],styles:[".add_btn[_ngcontent-%COMP%]{border:none;background:transparent;width:34px}.add_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}.search_box[_ngcontent-%COMP%]{border:1px solid #dbdcdd;border-radius:6px}tr[_ngcontent-%COMP%]{line-height:3}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:1px solid currentColor}.more_btn[_ngcontent-%COMP%]{font-size:16px;font-weight:700;background-color:transparent;border:none}table.table[_ngcontent-%COMP%]{table-layout:fixed}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-align:start}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:min-content}ul[_ngcontent-%COMP%]{font-size:13px;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:3.2}"]}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(q)],p.Bz]}),o})(),Y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[_.ez,P,u.IJ]]}),o})()},4001:(f,m,d)=>{d.d(m,{N:()=>b});var _=d(7448),p=d(5e3),R=d(520),e=d(1228);let b=(()=>{class h{constructor(r,a){this.http=r,this.authService=a,this.header={headers:{"X-ORG-ID":this.authService.getOrgId()}}}getSpecificRoleTemplateList(r){return this.http.get(`${_.k.backend.host}/role/role-template/specific?bg=`+r,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}getPublicRoleTemplateList(){return this.http.get(`${_.k.backend.host}/role/role-template/public`,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}getRoleTemplateList(){return this.http.get(`${_.k.backend.host}/role/role-template`,this.header)}getRoleList(){return this.http.get(`${_.k.backend.host}/role/role/`,this.header)}getRoleListByID(r){return this.http.get(`${_.k.backend.host}/role/template-based-role/restricted-roles/`,{headers:{"X-ORG-ID":r}})}getRoleListByIDUnRestricted(r){return this.http.get(`${_.k.backend.host}/role/template-based-role/unrestricted-roles/`,{headers:{"X-ORG-ID":r}})}getRoleTemplateById(r,a){return this.http.get(`${_.k.backend.host}/role/role-template/`+a,{headers:{"X-ORG-ID":r}})}saveRoleFromRoleTemplate(r,a,u,g){return g||(g="intelliveer"),console.log(g),this.http.post(`${_.k.backend.host}/role/template-based-role/`+u+"?bg="+a,r,{headers:{"X-ORG-ID":g}})}updateRoleFromRoleTemplate(r,a,u){return u||(u="intelliveer"),console.log(u),this.http.put(`${_.k.backend.host}/role/template-based-role/`+a,r,{headers:{"X-ORG-ID":u}})}saveRoleFromRoleScratch(r){return this.http.post(`${_.k.backend.host}/role/role/`,r,this.header)}updateRoleFromRoleScratch(r,a){return this.http.put(`${_.k.backend.host}/role/role/`+a,r,this.header)}deleteRole(r,a){return a||(a="intelliveer"),this.http.delete(`${_.k.backend.host}/role/role/`+r,{headers:{"X-ORG-ID":a}})}getRoleById(r){return this.http.get(`${_.k.backend.host}/role/role/`+r,this.header)}getRoleByIdBgId(r,a){return this.http.get(`${_.k.backend.host}/role/role/`+r,{headers:{"X-ORG-ID":a}})}getLegelEntityList(){return this.http.get(`${_.k.backend.host}/bg/legal-entity`,this.header)}getLocationList(){return this.http.get(`${_.k.backend.host}/bg/location`,this.header)}getPracticeList(){return this.http.get(`${_.k.backend.host}/bg/practice`,this.header)}getPermissionList(){return this.http.get(`${_.k.backend.host}/role/role-template/permissions/meta`,this.header)}}return h.\u0275fac=function(r){return new(r||h)(p.LFG(R.eN),p.LFG(e.e))},h.\u0275prov=p.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);