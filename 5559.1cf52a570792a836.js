"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5559],{3785:(F,g,o)=>{o.d(g,{i:()=>Y});var e=o(5e3),r=o(2382),p=o(9118),h=o(520),f=o(4524),C=o(9516),P=o(9100),B=o(703),E=o(5730),O=o(4540),v=o(192),M=o(4357),_=o(528),A=o(63),b=o(9196),x=o(4748),T=o(4996),D=o(9808),S=o(1762),U=o(5417),I=o(809),G=o(4376),Z=o(9693),L=o(7842);function N(i,a){if(1&i&&(e.TgZ(0,"div")(1,"li",9),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.BGname," ")}}function W(i,a){1&i&&(e.TgZ(0,"div")(1,"li",9),e._uU(2," Add Business Group "),e.qZA()())}function R(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",36)(1,"img",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).checkPermission()}),e.qZA()()}}function K(i,a){if(1&i&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.iso3),e.xp6(1),e.Oqu(t.name)}}function J(i,a){1&i&&(e.TgZ(0,"div",39)(1,"div",40)(2,"label",23),e._uU(3,"Password"),e.qZA(),e._UZ(4,"input",41),e.qZA()())}const Q=function(i,a){return{"col-11":i,"col-12":a}},y=function(i,a){return{"mandatory-field-saved":i,"mandatory-field":a}};function w(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",10)(2,"div",11)(3,"div",12)(4,"app-nav-bar-pills",13),e.NdJ("onCancel",function(){return e.CHM(t),e.oxw().cancel()})("onSave",function(){e.CHM(t);const s=e.oxw();return s.save(s.BGForm.value)}),e.qZA()()(),e.YNc(5,R,2,0,"div",14),e.qZA(),e.TgZ(6,"form",15,16),e.NdJ("submit",function(){e.CHM(t);const s=e.MAs(7);return e.oxw().save(s.value)}),e.TgZ(8,"div",17),e.NdJ("sectionChange",function(s){return e.CHM(t),e.oxw().onSectionChange(s)}),e.TgZ(9,"div",18)(10,"div",0)(11,"app-image-uploader",19),e.NdJ("onUpload",function(s){return e.CHM(t),e.oxw().handleUploadedImage(s)}),e.qZA()()(),e.TgZ(12,"div",20)(13,"div",0)(14,"h6",21),e._uU(15,"Profile"),e.qZA()(),e.TgZ(16,"div",0)(17,"div",22)(18,"label",23),e._uU(19,"Business Group Name"),e.qZA(),e.TgZ(20,"input",24),e.NdJ("input",function(){return e.CHM(t),e.oxw().inputChanged("name")}),e.qZA()(),e.TgZ(21,"div",22)(22,"label",23),e._uU(23,"TIN"),e.qZA(),e._UZ(24,"input",25),e.qZA(),e.TgZ(25,"div",22)(26,"label",23),e._uU(27,"Country"),e.qZA(),e.TgZ(28,"ng-select",26),e.NdJ("change",function(){return e.CHM(t),e.oxw().inputChanged("country")}),e.YNc(29,K,2,2,"ng-option",27),e.qZA()(),e.TgZ(30,"div",22)(31,"label",23),e._uU(32,"Currency"),e.qZA(),e.TgZ(33,"ng-select",28),e.NdJ("change",function(){return e.CHM(t),e.oxw().inputChanged("currency")}),e.TgZ(34,"ng-option"),e._uU(35,"USD"),e.qZA()()()()(),e.TgZ(36,"div",29)(37,"div",0)(38,"h6",21),e._uU(39,"Physical Address"),e.qZA()(),e._UZ(40,"app-address-form",30),e.qZA(),e.TgZ(41,"div",31)(42,"div",0)(43,"h6",21),e._uU(44,"Mailing Address"),e.qZA()(),e._UZ(45,"app-address-form",30),e.qZA(),e.TgZ(46,"div",32)(47,"div",0)(48,"h6",21),e._uU(49,"Insurance Billing / Payment Address"),e.qZA()(),e._UZ(50,"app-address-form",30),e.qZA(),e.TgZ(51,"div",33)(52,"div",0)(53,"h6",21),e._uU(54,"Contact"),e.qZA()(),e._UZ(55,"app-contact-details-form",30),e.qZA(),e.TgZ(56,"div",34)(57,"div",0)(58,"h6",21),e._uU(59,"Contact Person Info"),e.qZA()(),e._UZ(60,"app-contact-person-form",30),e.YNc(61,J,5,0,"div",35),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(25,Q,!t.isSaveButton,!t.inEdit)),e.xp6(2),e.Q6J("menuItems",t.menuItems)("activeClass",t.currentSelection)("cancelBtn",t.isSaveButton||!t.inEdit)("saveBtn",t.isSaveButton||!t.inEdit)("disableSaveBtn",!1),e.xp6(1),e.Q6J("ngIf",!t.isSaveButton&&t.inEdit),e.xp6(1),e.Q6J("formGroup",t.BGForm),e.xp6(5),e.Q6J("imageUpLoaderDisable",t.imageUpLoaderDisable)("imageUrl",(null==t.formData?null:t.formData.logo)||""),e.xp6(9),e.Q6J("ngClass",e.WLB(28,y,t.mandatoryBGNameSaved,!t.mandatoryBGNameSaved)),e.xp6(8),e.Q6J("ngClass",e.WLB(31,y,t.mandatoryCountrySaved,!t.mandatoryCountrySaved)),e.xp6(1),e.Q6J("ngForOf",t.countries),e.xp6(4),e.Q6J("ngClass",e.WLB(34,y,t.mandatoryCurrencySaved,!t.mandatoryCurrencySaved)),e.xp6(7),e.Q6J("parentGroup",t.BGForm)("formGroupName","physicalAddress"),e.xp6(5),e.Q6J("parentGroup",t.BGForm)("formGroupName","mailingAddress"),e.xp6(5),e.Q6J("parentGroup",t.BGForm)("formGroupName","insuranceBillingAddress"),e.xp6(5),e.Q6J("parentGroup",t.BGForm)("formGroupName","contactDetails"),e.xp6(5),e.Q6J("parentGroup",t.BGForm)("formGroupName","contactPerson"),e.xp6(1),e.Q6J("ngIf",t.password)}}let Y=(()=>{class i{constructor(t,n,s,l,c,d,u,m,j,H,q,V,z,$){this.fb=t,this.http=n,this.addressFormService=s,this.contactPersonFormService=l,this.contactDetailsFormService=c,this.geoService=d,this.alertService=u,this.patientUserServ=m,this.addPatientServ=j,this.insuranceServ=H,this.onboardingServ=q,this.searchString=V,this.globalRoutes=z,this.businessGroupService=$,this.title="",this.formData=void 0,this.onCancel=new e.vpe,this.onSubmit=new e.vpe,this.currentSelection="",this.menuItems=[{title:"Overview",id:"overview"},{title:"Profile",id:"profile"},{title:"Physical Address",id:"physicalAddress"},{title:"Mailing Address",id:"mailingAddress"},{title:"Insurance ",id:"insuranceBillingAddress"},{title:"Contact",id:"contactDetails"},{title:"Contact Person Info",id:"contactPerson"}],this.isSaveButton=!1,this.inEdit=!1,this.mandatoryBGNameSaved=!1,this.mandatoryCountrySaved=!1,this.mandatoryCurrencySaved=!1,this.imageUpLoaderDisable=!0}ngOnInit(){var t;this.getCountries(),this.getIPAddress(),this.loadIp(),this.initBGForm(this.formData),this.enableAndDisableInputs(),this.patientUserServ.setFalseAllNotPristine(),this.addPatientServ.setFalseAllNotPristineCWP(),this.insuranceServ.setFalseAllNotPristine(),this.onboardingServ.setFalseAllNotPristine(),null===(t=this.BGForm)||void 0===t||t.statusChanges.subscribe(n=>{var s;(null===(s=this.BGForm)||void 0===s?void 0:s.pristine)||(console.log("entereeeed, BG, wrong"),this.onboardingServ.setbusinessGroupNotPristine(!0))}),this.urlOnboarding=this.globalRoutes.getSettingsOnboardingUrl()}ngAfterViewInit(){}initBGForm(t){var n;t=t||{},0!=Object.keys(t).length?(this.inEdit=!0,this.BGFormDisable=!0):0==Object.keys(t).length&&(this.inEdit=!1,this.BGFormDisable=!1),this.BGForm=this.fb.group({logo:[(null==t?void 0:t.logo)||"null"],name:[(null==t?void 0:t.name)||"",r.kI.required],TIN:[(null==t?void 0:t.TIN)||""],country:[(null==t?void 0:t.country)||"",r.kI.required],currency:[(null==t?void 0:t.currency)||"",r.kI.required],password:["",this.password?[r.kI.required]:null],physicalAddress:this.addressFormService.getAddressForm((null==t?void 0:t.physicalAddress)||{}),mailingAddress:this.addressFormService.getAddressForm((null==t?void 0:t.mailingAddress)||{}),insuranceBillingAddress:this.addressFormService.getAddressForm((null==t?void 0:t.insuranceBillingAddress)||{}),contactDetails:this.contactDetailsFormService.getContactDetailsForm((null==t?void 0:t.contactDetails)||{}),contactPerson:this.contactPersonFormService.getContactPersonForm((null==t?void 0:t.contactPerson)||{},{title:!0,firstName:!0,lastName:!0,phone:{type:!0,number:!0,countryCode:!0},email:!0})}),this.addressFormService.setDisabledOrEnabled(this.BGFormDisable),this.contactPersonFormService.setDisabledOrEnabled(this.BGFormDisable),this.BGname=null===(n=this.BGForm.get("name"))||void 0===n?void 0:n.value}fieldValidation(t,n){var s,l,c,d,u,m;return n?(null===(l=null===(s=this.BGForm)||void 0===s?void 0:s.get(t))||void 0===l?void 0:l.valid)&&null!=(null===(d=null===(c=this.BGForm)||void 0===c?void 0:c.get(t))||void 0===d?void 0:d.value):null!=(null===(m=null===(u=this.BGForm)||void 0===u?void 0:u.get(t))||void 0===m?void 0:m.value)}save(t){var n,s;this.mandatoryBGNameSaved=!0,this.mandatoryCountrySaved=!0,this.mandatoryCurrencySaved=!0,this.contactPersonComponent.saved(),(null===(n=this.BGForm)||void 0===n?void 0:n.valid)&&!this.BGForm.pristine&&(this.onSubmit.emit(t),null===(s=this.BGForm)||void 0===s||s.markAsPristine(),this.alertService.success("Success","Business Group has been updated successfully"),this.onboardingServ.setbusinessGroupNotPristine(!1))}cancel(){this.onCancel.emit()}setAddress(t){var n,s;let l=null===(n=this.BGForm)||void 0===n?void 0:n.controls.physicalAddress.value;null===(s=this.BGForm)||void 0===s||s.controls[t].setValue(l)}handleUploadedImage(t){t&&this.BGForm&&this.BGForm.controls.logo.setValue(t.url)}getCountries(){this.geoService.getCountries().subscribe({next:t=>{this.countries=t}})}onSectionChange(t){this.currentSelection=t}getIPAddress(){this.http.get("http://api.ipify.org/?format=json").subscribe(t=>{this.ipAddress=t})}loadIp(){this.http.get("https://jsonip.com").pipe().subscribe(t=>(this.ipAddress=t.ip,this.http.get("https://api.geoapify.com/v1/ipinfo?&apiKey=f6ddac945f434391ace75449f5fbcb18").pipe().subscribe(s=>{this.userCity=s.city})))}checkPermission(){let t=this.globalRoutes.getSettingsOnboardingRoutes(),n=this.searchString.transform("title",t,"Business Group");this.bussinessEdit=this.searchString.transform("title",n[0].child,"Edit"),this.bussinessEdit[0].isEnabled?(this.isSaveButton=!0,this.enableAndDisableInputs(),this.imageUpLoaderDisable=!1):this.bussinessEdit.isEnable||(this.isSaveButton=!1)}enableAndDisableInputs(){var t,n;this.inEdit&&(this.isSaveButton?this.isSaveButton&&(null===(n=this.BGForm)||void 0===n||n.enable(),this.BGFormDisable=!1):(null===(t=this.BGForm)||void 0===t||t.disable(),this.BGFormDisable=!0),this.addressFormService.setDisabledOrEnabled(this.BGFormDisable),this.contactPersonFormService.setDisabledOrEnabled(this.BGFormDisable))}inputChanged(t){switch(t){case"name":this.mandatoryBGNameSaved=!1;break;case"country":this.mandatoryCountrySaved=!1;break;case"DOB":this.mandatoryCurrencySaved=!1}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(h.eN),e.Y36(f.W),e.Y36(C.V),e.Y36(P.O),e.Y36(B.p),e.Y36(E.c),e.Y36(O.r),e.Y36(v.S),e.Y36(M.y),e.Y36(_.D),e.Y36(A.E),e.Y36(b.o),e.Y36(x.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-business-group-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(p.Q,5),2&t){let s;e.iGM(s=e.CRH())&&(n.contactPersonComponent=s.first)}},inputs:{title:"title",formData:"formData",password:"password"},outputs:{onCancel:"onCancel",onSubmit:"onSubmit"},decls:11,vars:4,consts:[[1,"row"],[1,"col-2"],[1,"settings-row","pointer",3,"routerLink"],[1,"bi","bi-arrow-left-circle",2,"font-size","2rem","cursor","pointer"],[1,""],[1,"ul",2,"margin-top","27px"],[4,"ngIf"],[1,"col-10","component-view"],["class","row",4,"ngIf"],[1,"active"],[1,"row","sticky",2,"width","101%"],[3,"ngClass"],[1,"col"],[3,"menuItems","activeClass","cancelBtn","saveBtn","disableSaveBtn","onCancel","onSave"],["class","col-1 d-flex justify-content-center align-items-start","style","background-color: transparent;",4,"ngIf"],[3,"formGroup","submit"],["f","ngForm"],["id","main","scrollSpy","",1,"col-12",3,"sectionChange"],["id","overview",1,"section"],[3,"imageUpLoaderDisable","imageUrl","onUpload"],["id","profile",1,"section"],[1,"heading"],[1,"col-3"],[1,"required"],["type","text","placeholder","","name","name","formControlName","name",1,"form-control","input-upper","mandatory-field",3,"ngClass","input"],["type","text","formControlName","TIN",1,"form-control"],["formControlName","country",1,"mandatory-field",3,"ngClass","change"],["aria-selected","country.name==='Afghanistan'",3,"value",4,"ngFor","ngForOf"],["formControlName","currency",1,"mandatory-field",3,"ngClass","change"],["id","physicalAddress",1,"section"],[3,"parentGroup","formGroupName"],["id","mailingAddress",1,"section"],["id","insuranceBillingAddress",1,"section"],["id","contactDetails",1,"section"],["id","contactPerson",1,"section"],["class","row mt-3",4,"ngIf"],[1,"col-1","d-flex","justify-content-center","align-items-start",2,"background-color","transparent"],["src","/assets/icons/Edit.svg","alt","",2,"width","37px","height","37px","cursor","pointer",3,"click"],["aria-selected","country.name==='Afghanistan'",3,"value"],[1,"row","mt-3"],[1,"col-4"],["type","password","formControlName","password",1,"form-control","mandatory-field"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"p",4),e._uU(5,"Business Group"),e.qZA()(),e.TgZ(6,"ul",5),e.YNc(7,N,3,1,"div",6),e.YNc(8,W,3,0,"div",6),e.qZA()(),e.TgZ(9,"div",7),e.YNc(10,w,62,37,"div",8),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("routerLink",n.urlOnboarding),e.xp6(5),e.Q6J("ngIf",""!=n.BGname),e.xp6(1),e.Q6J("ngIf",""==n.BGname),e.xp6(2),e.Q6J("ngIf",n.BGForm))},directives:[T.rH,D.O5,D.mk,S.B,r._Y,r.JL,r.sg,U.j,I.$,r.Fj,r.JJ,r.u,G.w9,D.sg,G.jq,Z.C,r.x0,L.k,p.Q],styles:["#navbar-pills[_ngcontent-%COMP%]{height:40px;display:grid;grid-template-columns:1fr auto;margin-bottom:10px}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{background:#f9f9f9;display:flex;gap:15px;align-items:center;padding-left:10px;border-radius:6px;white-space:nowrap;overflow-y:auto}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 15px;text-decoration:none;color:#000;line-height:2.6;border-bottom:2px solid transparent}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;border-bottom:2px solid var(--primary);color:var(--primary)!important}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--primary)!important;border-bottom:2px solid var(--primary);font-weight:400}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{background:transparent;display:flex;gap:5px}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;width:34px}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px}#main[_ngcontent-%COMP%]{height:calc(100vh - 310px);overflow:auto;padding-bottom:5rem}#main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-bottom:5px}ul[_ngcontent-%COMP%]{font-size:13px;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:3.2}.component-view[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-x:hidden;overflow-y:auto}"]}),i})()},5968:(F,g,o)=>{o.d(g,{W:()=>M});var e=o(9808),r=o(2382),p=o(84),h=o(7263),f=o(9495),C=o(4359),P=o(4376),B=o(884),E=o(8076),O=o(4996),v=o(5e3);let M=(()=>{class _{}return _.\u0275fac=function(b){return new(b||_)},_.\u0275mod=v.oAB({type:_}),_.\u0275inj=v.cJS({imports:[[e.ez,r.u5,r.UX,h.q,f.$,C.P,P.A0,p.B,E.F,B.c,O.Bz]]}),_})()}}]);