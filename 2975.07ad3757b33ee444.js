"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2975],{1762:(w,x,m)=>{m.d(x,{B:()=>P});var i=m(5e3),C=m(4996),g=m(9808);const e=function(u){return{active:u}};function U(u,v){if(1&u){const _=i.EpF();i.TgZ(0,"a",7),i.NdJ("click",function(){const T=i.CHM(_).$implicit;return i.oxw().scroll(T)}),i._uU(1),i.qZA()}if(2&u){const _=v.$implicit,d=i.oxw();i.Q6J("ngClass",i.VKq(2,e,d.activeClass===_.id)),i.xp6(1),i.Oqu(_.title)}}function O(u,v){if(1&u){const _=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){return i.CHM(_),i.oxw().handleSaveBtnClicked()}),i._UZ(1,"img",9),i.qZA()}if(2&u){const _=i.oxw();i.Q6J("disabled",_.disableSaveBtn)}}function Z(u,v){if(1&u){const _=i.EpF();i.TgZ(0,"button",10),i.NdJ("click",function(){return i.CHM(_),i.oxw().handleAddCancelClicked()}),i._UZ(1,"img",11),i.qZA()}}function A(u,v){if(1&u){const _=i.EpF();i.TgZ(0,"button",10),i.NdJ("click",function(){return i.CHM(_),i.oxw().handleSaveCancelClicked()}),i._UZ(1,"img",12),i.qZA()}}function B(u,v){1&u&&(i.TgZ(0,"button",13),i._UZ(1,"img",14),i.qZA())}function L(u,v){if(1&u){const _=i.EpF();i.TgZ(0,"button",10),i.NdJ("click",function(){i.CHM(_);const b=i.oxw();return b.editButtonURL(null==b.editButton?null:b.editButton.url)}),i._UZ(1,"img",15),i.qZA()}}let P=(()=>{class u{constructor(_){this.router=_,this.activeClass="init",this.mode="menu",this.saveBtn=!1,this.disableSaveBtn=!1,this.cancelBtn=!1,this.disableCancelBtn=!1,this.addBtn=!1,this.disableAddBtn=!1,this.onCancel=new i.vpe,this.onSave=new i.vpe,this.onAdd=new i.vpe,this.menuItems=[]}ngOnInit(){}ngAfterContentInit(){this.activeClass=0!=this.menuItems.length?this.menuItems[0].id:""}scroll(_){const d=document.getElementById(_.id);d&&d.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}handleSaveBtnClicked(){this.onSave.emit()}handleSaveCancelClicked(){this.onCancel.emit()}handleAddCancelClicked(){this.onAdd.emit()}editButtonURL(_){this.router.navigate([_])}}return u.\u0275fac=function(_){return new(_||u)(i.Y36(C.F0))},u.\u0275cmp=i.Xpm({type:u,selectors:[["app-nav-bar-pills"]],inputs:{activeClass:"activeClass",mode:"mode",saveBtn:"saveBtn",disableSaveBtn:"disableSaveBtn",cancelBtn:"cancelBtn",disableCancelBtn:"disableCancelBtn",addBtn:"addBtn",editButton:"editButton",disableAddBtn:"disableAddBtn",menuItems:"menuItems"},outputs:{onCancel:"onCancel",onSave:"onSave",onAdd:"onAdd"},decls:10,vars:6,consts:[["id","navbar-pills"],[1,"left",2,"margin-left","0px"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"right"],["class","save",3,"disabled","click",4,"ngIf"],["class","cancel",3,"click",4,"ngIf"],["class","save",4,"ngIf"],[3,"ngClass","click"],[1,"save",3,"disabled","click"],["src","/assets/icons/save.svg","alt",""],[1,"cancel",3,"click"],["src","/assets/icons/add.svg","alt",""],["src","/assets/icons/cancel.svg","alt",""],[1,"save"],["src","/assets/icons/Add-Patient-Wizard-Green.svg","alt",""],["src","/assets/icons/Add-Patient-Wizard-Red.svg","alt",""]],template:function(_,d){1&_&&(i.TgZ(0,"div")(1,"div",0)(2,"div",1),i.YNc(3,U,2,4,"a",2),i.qZA(),i.TgZ(4,"div",3),i.YNc(5,O,2,1,"button",4),i.YNc(6,Z,2,0,"button",5),i.YNc(7,A,2,0,"button",5),i.YNc(8,B,2,0,"button",6),i.YNc(9,L,2,0,"button",5),i.qZA()()()),2&_&&(i.xp6(3),i.Q6J("ngForOf",d.menuItems),i.xp6(2),i.Q6J("ngIf",d.saveBtn),i.xp6(1),i.Q6J("ngIf",d.addBtn),i.xp6(1),i.Q6J("ngIf",d.cancelBtn),i.xp6(1),i.Q6J("ngIf",d.disableSaveBtn&&(null==d.editButton?null:d.editButton.isButton)),i.xp6(1),i.Q6J("ngIf",!d.disableSaveBtn&&(null==d.editButton?null:d.editButton.isButton)))},directives:[g.sg,g.mk,g.O5],styles:["#navbar-pills[_ngcontent-%COMP%]{height:40px;display:grid;grid-template-columns:1fr auto;margin-bottom:10px}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{background:#f9f9f9;display:flex;gap:15px;align-items:center;padding-left:10px;border-radius:6px;white-space:nowrap;overflow-y:auto}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 15px;text-decoration:none;color:#000;line-height:2.6;border-bottom:2px solid transparent}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;border-bottom:2px solid var(--primary);color:var(--primary)!important}#navbar-pills[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--primary)!important;border-bottom:2px solid var(--primary);font-weight:400}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{background:transparent;display:flex;gap:5px}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;width:34px}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}#navbar-pills[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px}"]}),u})()},8076:(w,x,m)=>{m.d(x,{F:()=>g});var i=m(9808),C=m(5e3);let g=(()=>{class e{}return e.\u0275fac=function(O){return new(O||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[i.ez]]}),e})()},2975:(w,x,m)=>{m.r(x),m.d(x,{UserPolicyModule:()=>ne});var i=m(9808),C=m(4996),g=m(2382),e=m(5e3),U=m(9709),O=m(1228),Z=m(5730),A=m(7802),B=m(1762),L=m(4376),P=m(9759);const u=["legelEntity"],v=["location"],_=["practice"];function d(o,l){if(1&o&&(e.TgZ(0,"div")(1,"div",18),e._UZ(2,"input",19),e.qZA()()),2&o){const t=l.$implicit;e.xp6(2),e.s9C("value",t.name)}}function b(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"ng-option",20),e.NdJ("change",function(){const r=e.CHM(t).$implicit;return e.oxw().selectLegelEntity(r)}),e._uU(1),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}function T(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"ng-option",20),e.NdJ("change",function(){const r=e.CHM(t).$implicit;return e.oxw().selectLocation(r)}),e._uU(1),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}function M(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"ng-option",20),e.NdJ("change",function(){const r=e.CHM(t).$implicit;return e.oxw().selectPractice(r)}),e._uU(1),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}function E(o,l){if(1&o&&(e.TgZ(0,"p")(1,"strong"),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.value.module)}}function J(o,l){if(1&o&&(e.TgZ(0,"p")(1,"strong"),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.value.section)}}function I(o,l){if(1&o&&e._UZ(0,"input",42),2&o){const t=e.oxw().$implicit;e.uIk("disabled",t.value.locked)}}function S(o,l){1&o&&e._UZ(0,"input",42)}function k(o,l){if(1&o&&(e._UZ(0,"input",46),e.TgZ(1,"span",47),e._uU(2),e.qZA()),2&o){const t=l.item;e.Q6J("checked",l.item$.selected),e.xp6(2),e.Oqu(t.name)}}function R(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"ng-select",43,44),e.NdJ("change",function(){e.CHM(t);const s=e.MAs(3);return e.oxw(6).onChangeLE(s)}),e.YNc(4,k,3,2,"ng-template",45),e.qZA()()()}if(2&o){const t=e.oxw(6);e.xp6(2),e.Q6J("items",t.legelEntityList)("multiple",!0)}}function Y(o,l){if(1&o&&(e._UZ(0,"input",46),e.TgZ(1,"span",47),e._uU(2),e.qZA()),2&o){const t=l.item;e.Q6J("checked",l.item$.selected),e.xp6(2),e.Oqu(t.name)}}function q(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"ng-select",48,49),e.NdJ("change",function(){e.CHM(t);const s=e.MAs(3);return e.oxw(6).onChangeLOC(s)}),e.YNc(4,Y,3,2,"ng-template",45),e.qZA()()()}if(2&o){const t=e.oxw(6);e.xp6(2),e.Q6J("items",t.locationList)("multiple",!0)}}function G(o,l){1&o&&e._UZ(0,"img",50)}function D(o,l){1&o&&e._UZ(0,"img",51)}function Q(o,l){1&o&&e._UZ(0,"br")}function $(o,l){if(1&o&&(e._UZ(0,"input",46),e.TgZ(1,"span",47),e._uU(2),e.qZA()),2&o){const t=l.item;e.Q6J("checked",l.item$.selected),e.xp6(2),e.Oqu(t.name)}}function H(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"ng-select",52,53),e.NdJ("change",function(){e.CHM(t);const s=e.MAs(3);return e.oxw(6).onChangePR(s)}),e.YNc(4,$,3,2,"ng-template",45),e.qZA()()()}if(2&o){const t=e.oxw(6);e.xp6(2),e.Q6J("items",t.practiceList)("multiple",!0)}}function j(o,l){if(1&o&&(e.TgZ(0,"tr",36)(1,"td")(2,"tr")(3,"td"),e.YNc(4,I,1,1,"input",37),e.YNc(5,S,1,0,"input",37),e.qZA()(),e.YNc(6,R,5,2,"tr",38),e.qZA(),e.TgZ(7,"td")(8,"tr")(9,"td"),e._UZ(10,"input",39),e._uU(11),e.qZA()(),e._UZ(12,"br"),e.YNc(13,q,5,2,"tr",38),e.qZA(),e.TgZ(14,"td")(15,"tr")(16,"td"),e.YNc(17,G,1,0,"img",40),e.YNc(18,D,1,0,"img",41),e.qZA()(),e._UZ(19,"br"),e.YNc(20,Q,1,0,"br",38),e.YNc(21,H,5,2,"tr",38),e.qZA()()),2&o){const t=l.$implicit,n=l.index,s=e.oxw(2).$implicit;e.Q6J("formGroupName",n),e.xp6(4),e.Q6J("ngIf",t.value.locked),e.xp6(1),e.Q6J("ngIf",!t.value.locked),e.xp6(1),e.Q6J("ngIf",s.value.displayShowAdvanced),e.xp6(5),e.hij("",t.value.name," "),e.xp6(2),e.Q6J("ngIf",s.value.displayShowAdvanced),e.xp6(4),e.Q6J("ngIf",t.value.locked&&t.value.allowOverride),e.xp6(1),e.Q6J("ngIf",t.value.locked&&!t.value.allowOverride),e.xp6(2),e.Q6J("ngIf",!t.value.locked),e.xp6(1),e.Q6J("ngIf",s.value.displayShowAdvanced)}}function W(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"input",31),e.NdJ("change",function(){e.CHM(t);const s=e.oxw().$implicit;return s.value.displayShowAdvanced=!s.value.displayShowAdvanced}),e.qZA(),e.TgZ(3,"label",32),e._uU(4," Show Advanced "),e.qZA()()(),e.TgZ(5,"table",33)(6,"thead")(7,"tr",34),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10,"Permission"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Lock"),e.qZA(),e._UZ(13,"th"),e.qZA()(),e.TgZ(14,"tbody"),e.YNc(15,j,22,10,"tr",35),e.qZA()()}if(2&o){const t=e.oxw().index,n=e.oxw(2).index,s=e.oxw();e.Q6J("align","end"),e.xp6(15),e.Q6J("ngForOf",s.permissionNested(n,t))}}function z(o,l){1&o&&(e.TgZ(0,"ngb-accordion",25,26)(2,"ngb-panel",27),e.YNc(3,J,3,1,"ng-template",22),e.YNc(4,W,16,2,"ng-template",28),e.qZA()()),2&o&&e.Q6J("formGroupName",l.index)}function K(o,l){if(1&o&&e.YNc(0,z,5,1,"ngb-accordion",24),2&o){const t=e.oxw().index,n=e.oxw();e.Q6J("ngForOf",n.sectionNested(t))}}function V(o,l){1&o&&(e.TgZ(0,"ngb-panel",21),e.YNc(1,E,3,1,"ng-template",22),e.YNc(2,K,1,1,"ng-template",23),e.qZA()),2&o&&e.Q6J("formGroupName",l.index)}const X=[{path:"",component:(()=>{class o{constructor(t,n,s,r,a,c){this.router=t,this.fb=n,this.userService=s,this.authService=r,this.alertService=a,this.businessGroupDropdownService=c,this.formData=void 0,this.showAdvanceBG=!0,this.showAdvanceLE=!0,this.showAdvanceLOC=!0,this.showAdvancePC=!0,this.permissionOBJ=[],this.userCurrentRoleList=[],this.userCurrentRoleListForForm=[],this.legelEntityList=[],this.locationList=[],this.practiceList=[],this.saveDissable=!0,this.legelEntitySearchLst=[],this.businessGroupDropdownSupscription=this.businessGroupDropdownService.businessGroup().subscribe(p=>{p&&(this.selectedBusinessGroup=p,this.getOrgBgId())})}ngOnInit(){console.log(this.refLegelEntity),this.initForm(this.formData)}initForm(t){t=t||{},this.Form=this.fb.group({permissions:this.fb.array([])}),this.Form.valueChanges.subscribe(n=>{this.saveDissable=!1})}get moduleNested(){return this.Form.get("permissions").controls}sectionNested(t){return this.moduleNested[t].get("sections").controls}permissionNested(t,n){return this.moduleNested[t].get("sections").controls[n].get("permissions").controls}moduleArray(){return this.Form.get("permissions")}newModule(){return this.roleModuleNestedForm=this.fb.group({module:new g.NI,sections:this.fb.array([])})}sectionsArray(){return this.roleModuleNestedForm.get("sections")}newSections(){return this.roleSectionNestedForm=this.fb.group({section:new g.NI,permissions:this.fb.array([])})}permissionArray(){return this.roleSectionNestedForm.get("permissions")}newPermissions(){return this.fb.group({name:new g.NI,enabled:new g.NI(!1),locked:new g.NI(!1),allowOverride:new g.NI(!1),attrs:{}})}getUserPolicyPermission(){this.userService.getUserPolicyList(this.bgUserLogin,localStorage.getItem("userId")).subscribe(t=>{console.log(t)},t=>{console.log(t)})}save(t){this.alertService.conformAlert("Are you sure?","You want to update a user policy").then(n=>{n.value&&this.saveUesrPolicyList()})}saveUesrPolicyList(){let t=[];this.Form.value.permissions.map(n=>{n.sections.map(s=>{s.permissions.map(r=>{delete r.locked,delete r.allowOverride})})});for(let n=0;n<this.Form.value.permissions.length;n++){const s=this.Form.value.permissions[n];for(let r=0;r<s.sections.length;r++){const a=s.sections[r];for(let c=0;c<a.permissions.length;c++){const p=a.permissions[c];1==p.enabled&&t.push(p)}a.permissions=t,t=[]}}console.log(this.Form.value),this.userService.saveUserPolicyList(this.bgUserLogin,localStorage.getItem("userId"),this.Form.value).subscribe(n=>{this.alertService.success("Success","User policy has been updated successfully"),this.router.navigate(["/dashboard/settings/user-management/manage-user"])},n=>{console.log(n)})}cancel(){this.router.navigate(["/dashboard/settings/user-management/manage-user"])}getOrgBgId(){var t,n,s,r,a,c,p,h,f,y;let F=localStorage.getItem("selected_business_group"),N=this.authService.getLoggedInUser();(null==N?void 0:N.__ISSU__)?"intelliveer"==F||null==F?(this.getUserCurrentRoleList("intelliveer"),this.getLegelEntityList("intelliveer"),this.getLocationList("intelliveer"),this.getPracticeList("intelliveer"),this.bgUserLogin="intelliveer"):(this.getUserCurrentRoleList(null===(t=this.selectedBusinessGroup)||void 0===t?void 0:t.bgId),this.getLegelEntityList(null===(n=this.selectedBusinessGroup)||void 0===n?void 0:n.bgId),this.getLocationList(null===(s=this.selectedBusinessGroup)||void 0===s?void 0:s.bgId),this.getPracticeList(null===(r=this.selectedBusinessGroup)||void 0===r?void 0:r.bgId),this.bgUserLogin=null===(a=this.selectedBusinessGroup)||void 0===a?void 0:a.bgId):(this.getUserCurrentRoleList(null===(c=this.selectedBusinessGroup)||void 0===c?void 0:c.bgId),this.getLegelEntityList(null===(p=this.selectedBusinessGroup)||void 0===p?void 0:p.bgId),this.getLocationList(null===(h=this.selectedBusinessGroup)||void 0===h?void 0:h.bgId),this.getPracticeList(null===(f=this.selectedBusinessGroup)||void 0===f?void 0:f.bgId),this.bgUserLogin=null===(y=this.selectedBusinessGroup)||void 0===y?void 0:y.bgId),this.getUserPolicyPermission()}getUserCurrentRoleList(t){this.userCurrentRoleList=[],this.userCurrentRoleListForForm=[];let n=localStorage.getItem("userId");this.userService.getUserData(t,n).forEach(s=>{s&&s.roles.forEach((r,a)=>{console.log(r,t),this.userService.getUserRoleData(t,s.roles[a]).subscribe({next:c=>{c&&this.userCurrentRoleList.push(c),this.setPermissionForCancelANDNew(c),s.roles.length-1==a&&setTimeout(()=>{var h,f;console.log(null===(h=this.userCurrentRoleListForForm[0])||void 0===h?void 0:h.permissions,"permissions"),this.setUserPolicyData(null===(f=this.userCurrentRoleListForForm[0])||void 0===f?void 0:f.permissions)},200)},error:()=>{}})})})}setUserPolicyData(t){t.forEach(n=>{const s=this.newModule();n.sections.forEach(r=>{const a=this.newSections();r.permissions.forEach(c=>{const p=this.newPermissions();p.patchValue({name:c.name,enabled:c.enabled,locked:c.locked,allowOverride:c.allowOverride}),this.permissionArray().push(p)}),a.patchValue({section:r.section}),this.sectionsArray().push(a)}),s.patchValue({module:n.module}),this.moduleArray().push(s)})}cancleUserCurrentRole(t,n){1!=this.userCurrentRoleList.length?this.userCurrentRoleList.splice(n,1):this.alertService.displayAlertMessage("Sorry....","You can not delete role"),this.moduleArray().clear(),this.sectionsArray().clear(),this.permissionArray().clear(),this.userCurrentRoleListForForm=[],this.permissionOBJ=[],this.userCurrentRoleList.forEach((s,r)=>{this.userService.getUserRoleData(this.bgUserLogin,s._id).subscribe({next:a=>{this.setPermissionForCancelANDNew(a),this.userCurrentRoleList.length-1==r&&setTimeout(()=>{var c,p;console.log(null===(c=this.userCurrentRoleListForForm[0])||void 0===c?void 0:c.permissions,"permissions"),this.setUserPolicyData(null===(p=this.userCurrentRoleListForForm[0])||void 0===p?void 0:p.permissions)},200)}})})}getRolesList(t){this.userService.getRoleList(t).subscribe({next:n=>{this.roleList=n},error:()=>{}})}selectRoleData(t){null==this.userCurrentRoleList.find(s=>s._id===t._id)&&this.userCurrentRoleList.push(t),console.log(this.userCurrentRoleList),this.moduleArray().clear(),this.sectionsArray().clear(),this.permissionArray().clear(),this.userCurrentRoleListForForm=[],this.permissionOBJ=[],this.addRolePermissions(this.userCurrentRoleList)}getLegelEntityList(t){this.userService.getLegelEntityList(t).subscribe(n=>{console.log(n),this.legelEntityList=n,this.legelEntitySearchLst=this.legelEntityList},n=>{console.log(n)})}getLocationList(t){this.userService.getLocationList(t).subscribe(n=>{console.log(n),this.locationList=n},n=>{console.log(n)})}getPracticeList(t){this.userService.getPracticeList(t).subscribe(n=>{console.log(n),this.practiceList=n},n=>{console.log(n)})}addRolePermissions(t){t.forEach((n,s)=>{0==this.permissionOBJ.length?(this.userCurrentRoleListForForm.push(n),n.permissions.forEach(r=>{r.sections.forEach(a=>{a.permissions.forEach(c=>{this.permissionOBJ.push({name:c.name,enabled:c.enabled,locked:c.locked,allowOverride:c.allowOverride,attrs:{}})})})})):n.permissions.forEach((r,a)=>{r.sections.forEach((c,p)=>{c.permissions.forEach((h,f)=>{const y=this.permissionOBJ.find(F=>F.name===h.name);y&&((y.enabled||h.enabled)&&(this.userCurrentRoleListForForm[0].permissions[a].sections[p].permissions[f].enabled=!0),(y.locked||h.locked)&&(this.userCurrentRoleListForForm[0].permissions[a].sections[p].permissions[f].locked=!0),(y.allowOverride||h.allowOverride)&&(this.userCurrentRoleListForForm[0].permissions[a].sections[p].permissions[f].allowOverride=!0))})})}),t.length-1==s&&setTimeout(()=>{var r,a;console.log(null===(r=this.userCurrentRoleListForForm[0])||void 0===r?void 0:r.permissions,"permissions"),this.setUserPolicyData(null===(a=this.userCurrentRoleListForForm[0])||void 0===a?void 0:a.permissions)},200)})}setPermissionForCancelANDNew(t){0==this.permissionOBJ.length?(this.userCurrentRoleListForForm.push(t),t.permissions.forEach(n=>{n.sections.forEach(s=>{s.permissions.forEach(r=>{this.permissionOBJ.push({name:r.name,enabled:r.enabled,locked:r.locked,allowOverride:r.allowOverride,attrs:{}})})})})):t.permissions.forEach((n,s)=>{n.sections.forEach((r,a)=>{r.permissions.forEach((c,p)=>{const h=this.permissionOBJ.find(f=>f.name===c.name);h?((h.enabled||c.enabled)&&(this.userCurrentRoleListForForm[0].permissions[s].sections[a].permissions[p].enabled=!0),(h.locked||c.locked)&&(this.userCurrentRoleListForForm[0].permissions[s].sections[a].permissions[p].locked=!0),(h.allowOverride||c.allowOverride)&&(this.userCurrentRoleListForForm[0].permissions[s].sections[a].permissions[p].allowOverride=!0)):this.permissionOBJ.push({name:c.name,enabled:c.enabled,locked:c.locked,allowOverride:c.allowOverride,attrs:{}})})})})}selectLegelEntity(t){console.log(t),this.selectedLegelEntity=t.name,this.Form.value.permissions.map(n=>{n.sections.map(s=>{s.permissions.map(r=>{r.attrs={BR:{in:[this.selectedLegelEntity]}}})})})}selectLocation(t){console.log(t),this.selectedLocation=t.name,this.Form.value.permissions.map(n=>{n.sections.map(s=>{s.permissions.map(r=>{r.attrs={BR:{in:[this.selectedLocation]}}})})})}selectPractice(t){console.log(t),this.selectedPractice=t.name,this.Form.value.permissions.map(n=>{n.sections.map(s=>{s.permissions.map(r=>{r.attrs={BR:{in:[this.selectedPractice]}}})})})}onChangeLE(t){t.itemsList._selectionModel._selected=[]}onChangeLOC(t){t.itemsList._selectionModel._selected=[]}onChangePR(t){t.itemsList._selectionModel._selected=[]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F0),e.Y36(g.qu),e.Y36(U.K),e.Y36(O.e),e.Y36(Z.c),e.Y36(A.Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-policy"]],viewQuery:function(t,n){if(1&t&&(e.Gf(u,5),e.Gf(v,5),e.Gf(_,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.refLegelEntity=s.first),e.iGM(s=e.CRH())&&(n.refLocation=s.first),e.iGM(s=e.CRH())&&(n.refPractice=s.first)}},decls:31,vars:9,consts:[[3,"cancelBtn","saveBtn","disableSaveBtn","onCancel","onSave"],["autocomplete","off",3,"formGroup","submit"],["f","ngForm"],["id","main",1,"section"],[1,"label-input-gap",2,"font-weight","bold"],[1,"roles"],[4,"ngFor","ngForOf"],[1,"heading",2,"font-weight","bold"],[1,"row",2,"margin-bottom","31px"],[1,"twenty"],[1,"label-input-gap"],["placeholder","Select"],[3,"change",4,"ngFor","ngForOf"],[1,"row","formrow"],[1,"col-12",2,"margin-top","6px"],["activeIds","ngb-panel-0","formArrayName","permissions"],["acc","ngbAccordion"],["cardClass","accordion-title",3,"formGroupName",4,"ngFor","ngForOf"],[1,"xandroles","formrow"],["type","text","readonly","",1,"form-control",3,"value"],[3,"change"],["cardClass","accordion-title",3,"formGroupName"],["ngbPanelTitle",""],["ngbPanelContent","","formArrayName","sections"],["activeIds","ngb-panel-0",3,"formGroupName",4,"ngFor","ngForOf"],["activeIds","ngb-panel-0",3,"formGroupName"],["accOnboarding","ngbAccordion"],["cardClass","accordion-sub-title"],["ngbPanelContent","","formArrayName","permissions"],[3,"align"],[1,"form-check"],["type","checkbox","value","","id","flexCheckDefault",1,"form-check-input",2,"float","none",3,"change"],["for","flexCheckDefault",1,"form-check-label"],[1,"table"],[2,"background-color","#f1f2f2","height","30px"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["type","checkbox","formControlName","enabled",4,"ngIf"],[4,"ngIf"],["type","hidden","formControlName","name"],["src","assets/icons/locked_green.svg","width","20","height","20","placement","bottom","ngbTooltip","Permission can be Override",4,"ngIf"],["src","assets/icons/locked_red.svg","width","20","height","20","placement","bottom","ngbTooltip","Permission can not be Override",4,"ngIf"],["type","checkbox","formControlName","enabled"],["placeholder","Legal Entity",1,"ng-selection",2,"border","0px",3,"items","multiple","change"],["legelEntity",""],["ng-option-tmp",""],["type","checkbox",2,"margin","auto",3,"checked"],[2,"padding","8px"],["placeholder","Location",1,"ng-selection",2,"border","0px",3,"items","multiple","change"],["location",""],["src","assets/icons/locked_green.svg","width","20","height","20","placement","bottom","ngbTooltip","Permission can be Override"],["src","assets/icons/locked_red.svg","width","20","height","20","placement","bottom","ngbTooltip","Permission can not be Override"],["placeholder","Practice",1,"ng-selection",2,"border","0px",3,"items","multiple","change"],["practice",""]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"app-nav-bar-pills",0),e.NdJ("onCancel",function(){return n.cancel()})("onSave",function(){return n.save(n.Form.value)}),e.qZA(),e.TgZ(1,"form",1,2),e.NdJ("submit",function(){e.CHM(s);const a=e.MAs(2);return n.save(a.value)}),e.TgZ(3,"div",3)(4,"label",4),e._uU(5,"Current Roles"),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,d,3,1,"div",6),e.qZA(),e.TgZ(8,"h6",7),e._uU(9,"User Policy"),e.qZA(),e.TgZ(10,"div",8)(11,"div",9)(12,"label",10),e._uU(13,"Legal Entity"),e.qZA(),e.TgZ(14,"ng-select",11),e.YNc(15,b,2,1,"ng-option",12),e.qZA()(),e.TgZ(16,"div",9)(17,"label",10),e._uU(18,"Location"),e.qZA(),e.TgZ(19,"ng-select",11),e.YNc(20,T,2,1,"ng-option",12),e.qZA()(),e.TgZ(21,"div",9)(22,"label",10),e._uU(23,"Practice"),e.qZA(),e.TgZ(24,"ng-select",11),e.YNc(25,M,2,1,"ng-option",12),e.qZA()()(),e.TgZ(26,"div",13)(27,"div",14)(28,"ngb-accordion",15,16),e.YNc(30,V,3,1,"ngb-panel",17),e.qZA()()()()()}2&t&&(e.Q6J("cancelBtn",!0)("saveBtn",!0)("disableSaveBtn",n.Form.invalid||n.saveDissable),e.xp6(1),e.Q6J("formGroup",n.Form),e.xp6(6),e.Q6J("ngForOf",n.userCurrentRoleList),e.xp6(8),e.Q6J("ngForOf",n.legelEntityList),e.xp6(5),e.Q6J("ngForOf",n.locationList),e.xp6(5),e.Q6J("ngForOf",n.practiceList),e.xp6(5),e.Q6J("ngForOf",n.moduleNested))},directives:[B.B,g._Y,g.JL,g.sg,i.sg,L.w9,L.jq,P.gY,g.CE,P.Gk,g.x0,P.Cu,P.gW,i.O5,g.Wl,g.JJ,g.u,L.ir,g.Fj,P._L],styles:["#main[_ngcontent-%COMP%]{height:calc(100vh - 310px);overflow:auto;padding-bottom:5rem}#main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-bottom:5px}.roles[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:10px;margin-top:-11px;margin-bottom:10px}.xandroles[_ngcontent-%COMP%]{height:31px!important;display:flex;align-items:center;justify-content:flex-start;gap:0px;margin-top:10px}.xandroles[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#f9b85f;background-color:#faf2e9;height:25px;border-top-left-radius:0%;border-bottom-left-radius:0%;width:auto}.formrow[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.5}.ng-selection[_ngcontent-%COMP%]{position:relative;display:block;box-sizing:border-box;width:24rem}"]}),o})()}];let ee=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[C.Bz.forChild(X)],C.Bz]}),o})();var te=m(8076);let ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,ee,P.IJ,L.A0,g.u5,g.UX,te.F]]}),o})()}}]);