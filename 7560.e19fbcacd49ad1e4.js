"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7560],{7560:(b,h,i)=>{i.r(h),i.d(h,{EditLegalGuardianModule:()=>L});var l=i(9808),u=i(4996),p=i(7924),t=i(5e3),c=i(7802),m=i(4889),a=i(5730),o=i(1228),v=i(5601),G=i(5530);function y(r,g){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"app-legal-guardian-form",2),t.NdJ("onCancel",function(){return t.CHM(e),t.oxw().handleCancel()})("onSubmit",function(s){return t.CHM(e),t.oxw().update(s)}),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("title","Edit Family Member")("formData",e.data)}}const C=[{path:"",component:(()=>{class r{constructor(e,n,s,d,I,E,P){this.router=e,this.activeRoute=n,this.bgDropdownService=s,this.practiceLocation=d,this.alertService=I,this.authService=E,this.legalGuardianService=P,this.bgDropdownSubscription=this.bgDropdownService.businessGroup().subscribe(f=>{f&&(this.selectedBusinessGroup=f,this.getOrgBgId())}),this.bgDropdownService.disable(!0)}ngOnInit(){}ngOnDestroy(){this.bgDropdownService.disable(!1),this.bgDropdownSubscription.unsubscribe()}update(e){console.log(e);let n={_id:this.id,profile:{title:e.title,firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,DOB:e.DOB,gender:e.gender,preferredPronoun:e.pronoun,language:e.language,maritalStatus:e.maritalStatus},address:e.address,contact:{email:e.emailId,primaryPhone:{type:e.primaryPhoneType,countryCode:"",number:e.primaryPhoneNumber},secondaryPhone:{type:e.secondaryPhoneType,countryCode:"",number:e.secondaryPhoneNumber},primaryPreferredCommunicationMethod:e.primaryPreferredCommunicationMethod,secondaryPreferredCommunicationMethod:e.secondaryPreferredCommunicationMethod,preferredTimingForCall:e.preferredTimingForCall},notes:e.note};this.alertService.conformAlert("Are you sure","you want to update legal Guardian").then(s=>{s.isConfirmed&&this.legalGuardianService.updateLegalGuardian(n,this.bgId).subscribe(d=>{this.alertService.success("Success","Legal Guardian has been updated successfully"),this.router.navigate(["/dashboard/patient/patient-user/legal-guardian"])},d=>{console.log(d)})})}handleCancel(){this.router.navigate(["/dashboard/patient/patient-user/legal-guardian"])}getLegalGuardianData(){this.activeRoute.params.subscribe(e=>{e.id&&(this.id=e.id,this.legalGuardianService.getSingleLegalGuardianData(this.bgId,e.id).subscribe({next:n=>{this.data=n,console.log(n)},error:()=>{}}))})}getOrgBgId(){var e,n;let s=localStorage.getItem("selected_business_group"),d=this.authService.getLoggedInUser();(null==d?void 0:d.__ISSU__)?"intelliveer"==s||null==s?(this.bgId="intelliveer",this.getLegalGuardianData()):(this.bgId=null===(e=this.selectedBusinessGroup)||void 0===e?void 0:e.bgId,this.getLegalGuardianData()):(this.bgId=null===(n=this.selectedBusinessGroup)||void 0===n?void 0:n.bgId,this.getLegalGuardianData())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.F0),t.Y36(u.gz),t.Y36(c.Y),t.Y36(m.i),t.Y36(a.c),t.Y36(o.e),t.Y36(v.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-legal-guardian"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"title","formData","onCancel","onSubmit"]],template:function(e,n){1&e&&t.YNc(0,y,2,2,"div",0),2&e&&t.Q6J("ngIf",n.data)},directives:[l.O5,G.k],styles:[""]}),r})(),canDeactivate:[p.I]}];let D=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[u.Bz.forChild(C)],u.Bz]}),r})();var S=i(9515);let L=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[l.ez,D,S.$]]}),r})()},4889:(b,h,i)=>{i.d(h,{i:()=>t});var l=i(7448),u=i(5e3),p=i(520);let t=(()=>{class c{constructor(a){this.http=a}getPractices(a){return this.http.get(`${l.k.backend.host}/bg/practice`,{headers:{"X-ORG-ID":a}})}getPractice(a,o){return this.http.get(`${l.k.backend.host}/bg/practice/${o}`,{headers:{"X-ORG-ID":a}})}createPractice(a,o){return this.http.post(`${l.k.backend.host}/bg/practice`,o,{headers:{"X-ORG-ID":a}})}updatePractice(a,o,v){return this.http.put(`${l.k.backend.host}/bg/practice/${o}`,v,{headers:{"X-ORG-ID":a}})}deletePractice(a,o){return this.http.delete(`${l.k.backend.host}/bg/practice/${o}`,{headers:{"X-ORG-ID":a}})}}return c.\u0275fac=function(a){return new(a||c)(u.LFG(p.eN))},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);