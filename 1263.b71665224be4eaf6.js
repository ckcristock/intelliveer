"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[1263],{1263:(I,g,e)=>{e.r(g),e.d(g,{RoleManagementModule:()=>O});var R=e(9808),r=e(4996),a=e(531),d=e(9300),s=e(5e3),p=e(9196),c=e(1228),i=e(5325);const l=[{path:"",component:(()=>{class t{constructor(o,E,C,f){var m=this;this.routes=o,this.authService=E,this.router=C,this.rolesUsersServ=f,this.currentRoute="",this.urlSettings=this.routes.getSettingsUrl(),C.events.pipe((0,d.h)(T=>T instanceof r.m2)).subscribe(function(){var T=(0,a.Z)(function*(v){v.url.includes("manage-role-template/edit?_id")?(m.currentRoute="editRoleTemplate",m.currentRoute=yield m.rolesUsersServ.getRoleTemplateName()):v.url.includes("manage-role/edit")&&(m.currentRoute="editRole",m.roleTemplateName=yield m.rolesUsersServ.getRoleName())});return function(v){return T.apply(this,arguments)}}())}ngOnInit(){let o=localStorage.getItem("permissionSet");o=JSON.parse(o),this.menuItems=this.routes.getSettingsRoleManageRoutes(),(null==o?void 0:o.__ISSU__)||"Manage Role Templates"==this.menuItems[0].title&&delete this.menuItems[0].title}}return t.\u0275fac=function(o){return new(o||t)(s.Y36(p.o),s.Y36(c.e),s.Y36(r.F0),s.Y36(i.C))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-role-management"]],decls:1,vars:0,template:function(o,E){1&o&&s._UZ(0,"router-outlet")},directives:[r.lC],styles:["ul[_ngcontent-%COMP%]{font-size:13px;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:3.2}"]}),t})(),children:[{path:"",redirectTo:"manage-role-template",pathMatch:"full"},{path:"manage-role-template",data:{isEnabled:!0,value:"CAN_RETRIEVE_ROLE_TEMPLATE"},loadChildren:()=>e.e(4816).then(e.bind(e,4816)).then(t=>t.RoleTemplatesModule)},{path:"manage-role-template/add",data:{isEnabled:!0,value:"CAN_CREATE_ROLE_TEMPLATE"},loadChildren:()=>Promise.all([e.e(4376),e.e(8020)]).then(e.bind(e,8020)).then(t=>t.AddRoleTemplateModule)},{path:"manage-role-template/edit",data:{isEnabled:!0,value:"CAN_EDIT_ROLE_TEMPLATE"},loadChildren:()=>Promise.all([e.e(4376),e.e(8020)]).then(e.bind(e,8020)).then(t=>t.AddRoleTemplateModule)},{path:"manage-role",loadChildren:()=>e.e(4314).then(e.bind(e,4314)).then(t=>t.RolesModule)},{path:"manage-role/add",loadChildren:()=>Promise.all([e.e(4376),e.e(2243),e.e(6744)]).then(e.bind(e,6744)).then(t=>t.AddRoleModule)},{path:"manage-role/edit/:id",loadChildren:()=>Promise.all([e.e(4376),e.e(2243),e.e(1249)]).then(e.bind(e,1249)).then(t=>t.EditRoleModule)}]}];let n=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(l)],r.Bz]}),t})();var u=e(63);let O=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[u.E],imports:[[R.ez,n]]}),t})()},5325:(I,g,e)=>{e.d(g,{C:()=>c});var R=e(531),r=e(1135),a=e(7448),d=e(5e3),s=e(520),p=e(1228);let c=(()=>{class i{constructor(l,n){this.http=l,this.authService=n,this.roleTemplatesCounter=0,this.roleTemplates=[],this.roleTemplates$=new r.X([]),this.rolesCounter=0,this.roles=[],this.roles$=new r.X([])}pushRoleTemplate(l){this.roleTemplatesCounter++,l.id=this.roleTemplatesCounter,this.roleTemplates.push(l),this.roleTemplates$.next(this.roleTemplates),console.log(this.roleTemplates)}getRoleTemplates(){return this.roleTemplates$}getRoleTemplateMeta(){return this.http.get(`${a.k.backend.host}/role/role-template/permissions/meta`,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}createRoleTemplate(l){return this.http.post(`${a.k.backend.host}/role/role-template`,l,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}listRoleTemplate(){return this.http.get(`${a.k.backend.host}/role/role-template`,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}listRoleTemplateListByBGId(l,n){return this.http.get(`${a.k.backend.host}/role/role-template/`+l+"?bg="+n,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}singleRoleTemplate(l){return this.http.get(`${a.k.backend.host}/role/role-template/${l}`,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}updateRoleTemplate(l,n){return this.http.put(`${a.k.backend.host}/role/role-template/${n}`,l,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}deleteRoleTemplateById(l){return this.http.delete(`${a.k.backend.host}/role/role-template/${l}`,{headers:{"X-ORG-ID":this.authService.getOrgId()}})}deleteRoleTemplate(l){let n=this.roleTemplates.filter(u=>u.id!=l);this.roleTemplates=n,this.roleTemplates$.next(this.roleTemplates)}pushRole(l){this.rolesCounter++,l.id=this.rolesCounter,this.roles.push(l),this.roles$.next(this.roles)}getRoles(){return this.roles$}deleteRole(l){let n=this.roles.filter(u=>u.id!=l);this.roles=n,this.roles$.next(this.roles)}setRoleTemplateName(l){localStorage.setItem("roleTemplateName",JSON.stringify(l))}getRoleTemplateName(){return(0,R.Z)(function*(){return localStorage.getItem("roleTemplateName")})()}setRoleName(l){localStorage.setItem("roleName",JSON.stringify(l))}getRoleName(){return localStorage.getItem("roleName")}}return i.\u0275fac=function(l){return new(l||i)(d.LFG(s.eN),d.LFG(p.e))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);